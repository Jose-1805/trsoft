var classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},createClass=function(){function e(e,t){for(var o,n=0;n<t.length;n++)o=t[n],o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}return function(t,o,n){return o&&e(t.prototype,o),n&&e(t,n),t}}(),_extends=Object.assign||function(e){for(var t,o=1;o<arguments.length;o++)for(var n in t=arguments[o],t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e},inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&("object"==typeof t||"function"==typeof t)?t:e},Connector=function(){function e(t){classCallCheck(this,e),this._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",broadcaster:"pusher",csrfToken:null,host:null,key:null,namespace:"App.Events"},this.setOptions(t),this.connect()}return createClass(e,[{key:"setOptions",value:function(e){return this.options=_extends(this._defaultOptions,e),this.csrfToken()&&(this.options.auth.headers["X-CSRF-TOKEN"]=this.csrfToken()),e}},{key:"csrfToken",value:function(){var e;return"undefined"!=typeof window&&window.Laravel&&window.Laravel.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:"undefined"!=typeof document&&"function"==typeof document.querySelector&&(e=document.querySelector("meta[name=\"csrf-token\"]"))?e.getAttribute("content"):null}}]),e}(),Channel=function(){function e(){classCallCheck(this,e)}return createClass(e,[{key:"listenForWhisper",value:function(e,t){return this.listen(".client-"+e,t)}},{key:"notification",value:function(e){return this.listen(".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated",e)}},{key:"stopListeningForWhisper",value:function(e){return this.stopListening(".client-"+e)}}]),e}(),EventFormatter=function(){function e(t){classCallCheck(this,e),this.setNamespace(t)}return createClass(e,[{key:"format",value:function(e){return"."===e.charAt(0)||"\\"===e.charAt(0)?e.substr(1):(this.namespace&&(e=this.namespace+"."+e),e.replace(/\./g,"\\"))}},{key:"setNamespace",value:function(e){this.namespace=e}}]),e}(),PusherChannel=function(e){function t(e,o,n){classCallCheck(this,t);var r=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.name=o,r.pusher=e,r.options=n,r.eventFormatter=new EventFormatter(r.options.namespace),r.subscribe(),r}return inherits(t,e),createClass(t,[{key:"subscribe",value:function(){this.subscription=this.pusher.subscribe(this.name)}},{key:"unsubscribe",value:function(){this.pusher.unsubscribe(this.name)}},{key:"listen",value:function(e,t){return this.on(this.eventFormatter.format(e),t),this}},{key:"stopListening",value:function(e){return this.subscription.unbind(this.eventFormatter.format(e)),this}},{key:"on",value:function(e,t){return this.subscription.bind(e,t),this}}]),t}(Channel),PusherPrivateChannel=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"whisper",value:function(e,t){return this.pusher.channels.channels[this.name].trigger("client-"+e,t),this}}]),t}(PusherChannel),PusherPresenceChannel=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"here",value:function(e){return this.on("pusher:subscription_succeeded",function(t){e(Object.keys(t.members).map(function(e){return t.members[e]}))}),this}},{key:"joining",value:function(e){return this.on("pusher:member_added",function(t){e(t.info)}),this}},{key:"leaving",value:function(e){return this.on("pusher:member_removed",function(t){e(t.info)}),this}},{key:"whisper",value:function(e,t){return this.pusher.channels.channels[this.name].trigger("client-"+e,t),this}}]),t}(PusherChannel),SocketIoChannel=function(e){function t(e,o,n){classCallCheck(this,t);var r=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.events={},r.name=o,r.socket=e,r.options=n,r.eventFormatter=new EventFormatter(r.options.namespace),r.subscribe(),r.configureReconnector(),r}return inherits(t,e),createClass(t,[{key:"subscribe",value:function(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"unsubscribe",value:function(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}},{key:"listen",value:function(e,t){return this.on(this.eventFormatter.format(e),t),this}},{key:"stopListening",value:function(e){var t=this.eventFormatter.format(e);return this.socket.removeListener(t),delete this.events[t],this}},{key:"on",value:function(e,t){var o=this,n=function(e,n){o.name==e&&t(n)};this.socket.on(e,n),this.bind(e,n)}},{key:"configureReconnector",value:function(){var e=this,t=function(){e.subscribe()};this.socket.on("reconnect",t),this.bind("reconnect",t)}},{key:"bind",value:function(e,t){this.events[e]=this.events[e]||[],this.events[e].push(t)}},{key:"unbind",value:function(){var e=this;Object.keys(this.events).forEach(function(t){e.events[t].forEach(function(o){e.socket.removeListener(t,o)}),delete e.events[t]})}}]),t}(Channel),SocketIoPrivateChannel=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"whisper",value:function(e,t){return this.socket.emit("client event",{channel:this.name,event:"client-"+e,data:t}),this}}]),t}(SocketIoChannel),SocketIoPresenceChannel=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"here",value:function(e){return this.on("presence:subscribed",function(t){e(t.map(function(e){return e.user_info}))}),this}},{key:"joining",value:function(e){return this.on("presence:joining",function(t){return e(t.user_info)}),this}},{key:"leaving",value:function(e){return this.on("presence:leaving",function(t){return e(t.user_info)}),this}}]),t}(SocketIoPrivateChannel),NullChannel=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"subscribe",value:function(){}},{key:"unsubscribe",value:function(){}},{key:"listen",value:function(){return this}},{key:"stopListening",value:function(){return this}},{key:"on",value:function(){return this}}]),t}(Channel),NullPrivateChannel=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"whisper",value:function(){return this}}]),t}(NullChannel),NullPresenceChannel=function(e){function t(){return classCallCheck(this,t),possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return inherits(t,e),createClass(t,[{key:"here",value:function(){return this}},{key:"joining",value:function(){return this}},{key:"leaving",value:function(){return this}},{key:"whisper",value:function(){return this}}]),t}(NullChannel),PusherConnector=function(e){function t(){classCallCheck(this,t);var e=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.channels={},e}return inherits(t,e),createClass(t,[{key:"connect",value:function(){this.pusher="undefined"==typeof this.options.client?new Pusher(this.options.key,this.options):this.options.client}},{key:"listen",value:function(e,t,o){return this.channel(e).listen(t,o)}},{key:"channel",value:function(e){return this.channels[e]||(this.channels[e]=new PusherChannel(this.pusher,e,this.options)),this.channels[e]}},{key:"privateChannel",value:function(e){return this.channels["private-"+e]||(this.channels["private-"+e]=new PusherPrivateChannel(this.pusher,"private-"+e,this.options)),this.channels["private-"+e]}},{key:"presenceChannel",value:function(e){return this.channels["presence-"+e]||(this.channels["presence-"+e]=new PusherPresenceChannel(this.pusher,"presence-"+e,this.options)),this.channels["presence-"+e]}},{key:"leave",value:function(e){var t=this;[e,"private-"+e,"presence-"+e].forEach(function(e){t.leaveChannel(e)})}},{key:"leaveChannel",value:function(e){this.channels[e]&&(this.channels[e].unsubscribe(),delete this.channels[e])}},{key:"socketId",value:function(){return this.pusher.connection.socket_id}},{key:"disconnect",value:function(){this.pusher.disconnect()}}]),t}(Connector),SocketIoConnector=function(e){function t(){classCallCheck(this,t);var e=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.channels={},e}return inherits(t,e),createClass(t,[{key:"connect",value:function(){var e=this.getSocketIO();return this.socket=e(this.options.host,this.options),this.socket}},{key:"getSocketIO",value:function(){if("undefined"!=typeof this.options.client)return this.options.client;if("undefined"!=typeof io)return io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}},{key:"listen",value:function(e,t,o){return this.channel(e).listen(t,o)}},{key:"channel",value:function(e){return this.channels[e]||(this.channels[e]=new SocketIoChannel(this.socket,e,this.options)),this.channels[e]}},{key:"privateChannel",value:function(e){return this.channels["private-"+e]||(this.channels["private-"+e]=new SocketIoPrivateChannel(this.socket,"private-"+e,this.options)),this.channels["private-"+e]}},{key:"presenceChannel",value:function(e){return this.channels["presence-"+e]||(this.channels["presence-"+e]=new SocketIoPresenceChannel(this.socket,"presence-"+e,this.options)),this.channels["presence-"+e]}},{key:"leave",value:function(e){var t=this;[e,"private-"+e,"presence-"+e].forEach(function(e){t.leaveChannel(e)})}},{key:"leaveChannel",value:function(e){this.channels[e]&&(this.channels[e].unsubscribe(),delete this.channels[e])}},{key:"socketId",value:function(){return this.socket.id}},{key:"disconnect",value:function(){this.socket.disconnect()}}]),t}(Connector),NullConnector=function(e){function t(){classCallCheck(this,t);var e=possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.channels={},e}return inherits(t,e),createClass(t,[{key:"connect",value:function(){}},{key:"listen",value:function(){return new NullChannel}},{key:"channel",value:function(){return new NullChannel}},{key:"privateChannel",value:function(){return new NullPrivateChannel}},{key:"presenceChannel",value:function(){return new NullPresenceChannel}},{key:"leave",value:function(){}},{key:"leaveChannel",value:function(){}},{key:"socketId",value:function(){return"fake-socket-id"}},{key:"disconnect",value:function(){}}]),t}(Connector),Echo=function(){function e(t){classCallCheck(this,e),this.options=t,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}return createClass(e,[{key:"channel",value:function(e){return this.connector.channel(e)}},{key:"connect",value:function(){"pusher"==this.options.broadcaster?this.connector=new PusherConnector(this.options):"socket.io"==this.options.broadcaster?this.connector=new SocketIoConnector(this.options):"null"==this.options.broadcaster?this.connector=new NullConnector(this.options):"function"==typeof this.options.broadcaster&&(this.connector=new this.options.broadcaster(this.options))}},{key:"disconnect",value:function(){this.connector.disconnect()}},{key:"join",value:function(e){return this.connector.presenceChannel(e)}},{key:"leave",value:function(e){this.connector.leave(e)}},{key:"leaveChannel",value:function(e){this.connector.leaveChannel(e)}},{key:"listen",value:function(e,t,o){return this.connector.listen(e,t,o)}},{key:"private",value:function(e){return this.connector.privateChannel(e)}},{key:"socketId",value:function(){return this.connector.socketId()}},{key:"registerInterceptors",value:function(){"function"==typeof Vue&&Vue.http&&this.registerVueRequestInterceptor(),"function"==typeof axios&&this.registerAxiosRequestInterceptor(),"function"==typeof jQuery&&this.registerjQueryAjaxSetup()}},{key:"registerVueRequestInterceptor",value:function(){var e=this;Vue.http.interceptors.push(function(t,o){e.socketId()&&t.headers.set("X-Socket-ID",e.socketId()),o()})}},{key:"registerAxiosRequestInterceptor",value:function(){var e=this;axios.interceptors.request.use(function(t){return e.socketId()&&(t.headers["X-Socket-Id"]=e.socketId()),t})}},{key:"registerjQueryAjaxSetup",value:function(){var e=this;"undefined"!=typeof jQuery.ajax&&jQuery.ajaxPrefilter(function(t,o,n){e.socketId()&&n.setRequestHeader("X-Socket-Id",e.socketId())})}}]),e}();protocol_type="wss",Window.Pusher=!function(o,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Pusher=t():o.Pusher=t()}(window,function(){return function(s){function i(e){if(t[e])return t[e].exports;var n=t[e]={i:e,l:!1,exports:{}};return s[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}var t={};return i.m=s,i.c=t,i.d=function(o,t,e){i.o(o,t)||Object.defineProperty(o,t,{enumerable:!0,get:e})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(n,s){if(1&s&&(n=i(n)),8&s)return n;if(4&s&&"object"==typeof n&&n&&n.__esModule)return n;var e=Object.create(null);if(i.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:n}),2&s&&"string"!=typeof n)for(var r in n)i.d(e,r,function(t){return n[t]}.bind(null,r));return e},i.n=function(o){var t=o&&o.__esModule?function(){return o.default}:function(){return o};return i.d(t,"a",t),t},i.o=function(o,t){return Object.prototype.hasOwnProperty.call(o,t)},i.p="",i(i.s=2)}([function(o,t,r){!function(K){"use strict";function ee(o,t,e,n){o[t]=255&e>>24,o[t+1]=255&e>>16,o[t+2]=255&e>>8,o[t+3]=255&e,o[t+4]=255&n>>24,o[t+5]=255&n>>16,o[t+6]=255&n>>8,o[t+7]=255&n}function d(a,t,e,n,r){var o,c=0;for(o=0;o<r;o++)c|=a[t+o]^e[n+o];return(1&c-1>>>8)-1}function y(o,t,e,n){return d(o,t,e,n,16)}function v(o,t,e,n){return d(o,t,e,n,32)}function g(o,t,e,n){!function(D,t,e,n){for(var r,B=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,i=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,s=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,c=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,a=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,u=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,h=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,p=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,f=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,l=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,d=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,y=255&e[16]|(255&e[17])<<8|(255&e[18])<<16|(255&e[19])<<24,v=255&e[20]|(255&e[21])<<8|(255&e[22])<<16|(255&e[23])<<24,g=255&e[24]|(255&e[25])<<8|(255&e[26])<<16|(255&e[27])<<24,b=255&e[28]|(255&e[29])<<8|(255&e[30])<<16|(255&e[31])<<24,m=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,w=B,z=i,H=s,q=c,F=a,X=u,Y=h,K=p,W=f,G=l,J=d,V=y,Q=v,Z=g,$=b,ee=m,te=0;20>te;te+=2)w^=(r=0|(Q^=(r=0|(W^=(r=0|(F^=(r=0|w+Q)<<7|r>>>25)+w)<<9|r>>>23)+F)<<13|r>>>19)+W)<<18|r>>>14,X^=(r=0|(z^=(r=0|(Z^=(r=0|(G^=(r=0|X+z)<<7|r>>>25)+X)<<9|r>>>23)+G)<<13|r>>>19)+Z)<<18|r>>>14,J^=(r=0|(Y^=(r=0|(H^=(r=0|($^=(r=0|J+Y)<<7|r>>>25)+J)<<9|r>>>23)+$)<<13|r>>>19)+H)<<18|r>>>14,ee^=(r=0|(V^=(r=0|(K^=(r=0|(q^=(r=0|ee+V)<<7|r>>>25)+ee)<<9|r>>>23)+q)<<13|r>>>19)+K)<<18|r>>>14,w^=(r=0|(q^=(r=0|(H^=(r=0|(z^=(r=0|w+q)<<7|r>>>25)+w)<<9|r>>>23)+z)<<13|r>>>19)+H)<<18|r>>>14,X^=(r=0|(F^=(r=0|(K^=(r=0|(Y^=(r=0|X+F)<<7|r>>>25)+X)<<9|r>>>23)+Y)<<13|r>>>19)+K)<<18|r>>>14,J^=(r=0|(G^=(r=0|(W^=(r=0|(V^=(r=0|J+G)<<7|r>>>25)+J)<<9|r>>>23)+V)<<13|r>>>19)+W)<<18|r>>>14,ee^=(r=0|($^=(r=0|(Z^=(r=0|(Q^=(r=0|ee+$)<<7|r>>>25)+ee)<<9|r>>>23)+Q)<<13|r>>>19)+Z)<<18|r>>>14;w=0|w+B,z=0|z+i,H=0|H+s,q=0|q+c,F=0|F+a,X=0|X+u,Y=0|Y+h,K=0|K+p,W=0|W+f,G=0|G+l,J=0|J+d,V=0|V+y,Q=0|Q+v,Z=0|Z+g,$=0|$+b,ee=0|ee+m,D[0]=255&w>>>0,D[1]=255&w>>>8,D[2]=255&w>>>16,D[3]=255&w>>>24,D[4]=255&z>>>0,D[5]=255&z>>>8,D[6]=255&z>>>16,D[7]=255&z>>>24,D[8]=255&H>>>0,D[9]=255&H>>>8,D[10]=255&H>>>16,D[11]=255&H>>>24,D[12]=255&q>>>0,D[13]=255&q>>>8,D[14]=255&q>>>16,D[15]=255&q>>>24,D[16]=255&F>>>0,D[17]=255&F>>>8,D[18]=255&F>>>16,D[19]=255&F>>>24,D[20]=255&X>>>0,D[21]=255&X>>>8,D[22]=255&X>>>16,D[23]=255&X>>>24,D[24]=255&Y>>>0,D[25]=255&Y>>>8,D[26]=255&Y>>>16,D[27]=255&Y>>>24,D[28]=255&K>>>0,D[29]=255&K>>>8,D[30]=255&K>>>16,D[31]=255&K>>>24,D[32]=255&W>>>0,D[33]=255&W>>>8,D[34]=255&W>>>16,D[35]=255&W>>>24,D[36]=255&G>>>0,D[37]=255&G>>>8,D[38]=255&G>>>16,D[39]=255&G>>>24,D[40]=255&J>>>0,D[41]=255&J>>>8,D[42]=255&J>>>16,D[43]=255&J>>>24,D[44]=255&V>>>0,D[45]=255&V>>>8,D[46]=255&V>>>16,D[47]=255&V>>>24,D[48]=255&Q>>>0,D[49]=255&Q>>>8,D[50]=255&Q>>>16,D[51]=255&Q>>>24,D[52]=255&Z>>>0,D[53]=255&Z>>>8,D[54]=255&Z>>>16,D[55]=255&Z>>>24,D[56]=255&$>>>0,D[57]=255&$>>>8,D[58]=255&$>>>16,D[59]=255&$>>>24,D[60]=255&ee>>>0,D[61]=255&ee>>>8,D[62]=255&ee>>>16,D[63]=255&ee>>>24}(o,t,e,n)}function b(o,t,e,n){!function(k,t,e,n){for(var r,S=255&n[0]|(255&n[1])<<8|(255&n[2])<<16|(255&n[3])<<24,T=255&e[0]|(255&e[1])<<8|(255&e[2])<<16|(255&e[3])<<24,C=255&e[4]|(255&e[5])<<8|(255&e[6])<<16|(255&e[7])<<24,P=255&e[8]|(255&e[9])<<8|(255&e[10])<<16|(255&e[11])<<24,x=255&e[12]|(255&e[13])<<8|(255&e[14])<<16|(255&e[15])<<24,E=255&n[4]|(255&n[5])<<8|(255&n[6])<<16|(255&n[7])<<24,O=255&t[0]|(255&t[1])<<8|(255&t[2])<<16|(255&t[3])<<24,L=255&t[4]|(255&t[5])<<8|(255&t[6])<<16|(255&t[7])<<24,R=255&t[8]|(255&t[9])<<8|(255&t[10])<<16|(255&t[11])<<24,A=255&t[12]|(255&t[13])<<8|(255&t[14])<<16|(255&t[15])<<24,I=255&n[8]|(255&n[9])<<8|(255&n[10])<<16|(255&n[11])<<24,N=255&e[16]|(255&e[17])<<8|(255&e[18])<<16|(255&e[19])<<24,D=255&e[20]|(255&e[21])<<8|(255&e[22])<<16|(255&e[23])<<24,j=255&e[24]|(255&e[25])<<8|(255&e[26])<<16|(255&e[27])<<24,B=255&e[28]|(255&e[29])<<8|(255&e[30])<<16|(255&e[31])<<24,M=255&n[12]|(255&n[13])<<8|(255&n[14])<<16|(255&n[15])<<24,z=0;20>z;z+=2)S^=(r=0|(D^=(r=0|(R^=(r=0|(x^=(r=0|S+D)<<7|r>>>25)+S)<<9|r>>>23)+x)<<13|r>>>19)+R)<<18|r>>>14,E^=(r=0|(T^=(r=0|(j^=(r=0|(A^=(r=0|E+T)<<7|r>>>25)+E)<<9|r>>>23)+A)<<13|r>>>19)+j)<<18|r>>>14,I^=(r=0|(O^=(r=0|(C^=(r=0|(B^=(r=0|I+O)<<7|r>>>25)+I)<<9|r>>>23)+B)<<13|r>>>19)+C)<<18|r>>>14,M^=(r=0|(N^=(r=0|(L^=(r=0|(P^=(r=0|M+N)<<7|r>>>25)+M)<<9|r>>>23)+P)<<13|r>>>19)+L)<<18|r>>>14,S^=(r=0|(P^=(r=0|(C^=(r=0|(T^=(r=0|S+P)<<7|r>>>25)+S)<<9|r>>>23)+T)<<13|r>>>19)+C)<<18|r>>>14,E^=(r=0|(x^=(r=0|(L^=(r=0|(O^=(r=0|E+x)<<7|r>>>25)+E)<<9|r>>>23)+O)<<13|r>>>19)+L)<<18|r>>>14,I^=(r=0|(A^=(r=0|(R^=(r=0|(N^=(r=0|I+A)<<7|r>>>25)+I)<<9|r>>>23)+N)<<13|r>>>19)+R)<<18|r>>>14,M^=(r=0|(B^=(r=0|(j^=(r=0|(D^=(r=0|M+B)<<7|r>>>25)+M)<<9|r>>>23)+D)<<13|r>>>19)+j)<<18|r>>>14;k[0]=255&S>>>0,k[1]=255&S>>>8,k[2]=255&S>>>16,k[3]=255&S>>>24,k[4]=255&E>>>0,k[5]=255&E>>>8,k[6]=255&E>>>16,k[7]=255&E>>>24,k[8]=255&I>>>0,k[9]=255&I>>>8,k[10]=255&I>>>16,k[11]=255&I>>>24,k[12]=255&M>>>0,k[13]=255&M>>>8,k[14]=255&M>>>16,k[15]=255&M>>>24,k[16]=255&O>>>0,k[17]=255&O>>>8,k[18]=255&O>>>16,k[19]=255&O>>>24,k[20]=255&L>>>0,k[21]=255&L>>>8,k[22]=255&L>>>16,k[23]=255&L>>>24,k[24]=255&R>>>0,k[25]=255&R>>>8,k[26]=255&R>>>16,k[27]=255&R>>>24,k[28]=255&A>>>0,k[29]=255&A>>>8,k[30]=255&A>>>16,k[31]=255&A>>>24}(o,t,e,n)}function m(l,t,d,n,y,b,i){var s,m,_=new Uint8Array(16),u=new Uint8Array(64);for(m=0;16>m;m++)_[m]=0;for(m=0;8>m;m++)_[m]=b[m];for(;64<=y;){for(g(u,_,i,p),m=0;64>m;m++)l[t+m]=d[n+m]^u[m];for(s=1,m=8;16>m;m++)s=0|s+(255&_[m]),_[m]=255&s,s>>>=8;y-=64,t+=64,n+=64}if(0<y)for(g(u,_,i,p),m=0;m<y;m++)l[t+m]=d[n+m]^u[m];return 0}function _(l,t,d,u,r){var o,h,y=new Uint8Array(16),c=new Uint8Array(64);for(h=0;16>h;h++)y[h]=0;for(h=0;8>h;h++)y[h]=u[h];for(;64<=d;){for(g(c,y,r,p),h=0;64>h;h++)l[t+h]=c[h];for(o=1,h=8;16>h;h++)o=0|o+(255&y[h]),y[h]=255&o,o>>>=8;d-=64,t+=64}if(0<d)for(g(c,y,r,p),h=0;h<d;h++)l[t+h]=c[h];return 0}function S(a,t,e,n,r){var o=new Uint8Array(32);b(o,n,r,p);for(var i=new Uint8Array(8),s=0;8>s;s++)i[s]=n[s+16];return _(a,t,e,i,o)}function k(l,t,e,n,r,o,i){var s=new Uint8Array(32);b(s,o,i,p);for(var c=new Uint8Array(8),a=0;8>a;a++)c[a]=o[a+16];return m(l,t,e,n,r,c,s)}function T(a,t,e,n,r,o){var i=new l(o);return i.update(e,n,r),i.finish(a,t),0}function C(a,t,e,n,r,o){var i=new Uint8Array(16);return T(i,0,e,n,r,o),y(a,t,i,0)}function A(s,t,e,n,r){var o;if(32>e)return-1;for(k(s,0,t,0,e,n,r),T(s,16,s,32,e-32,s),o=0;16>o;o++)s[o]=0;return 0}function E(a,t,e,n,r){var o,c=new Uint8Array(32);if(32>e)return-1;if(S(c,0,32,n,r),0!==C(t,16,t,32,e-32,c))return-1;for(k(a,0,t,0,e,n,r),o=0;32>o;o++)a[o]=0;return 0}function P(o,t){var e;for(e=0;16>e;e++)o[e]=0|t[e]}function t(o){var t,s,i=1;for(t=0;16>t;t++)s=o[t]+i+65535,i=Math.floor(s/65536),o[t]=s-65536*i;o[0]+=i-1+37*(i-1)}function x(o,t,e){for(var n,s=0;16>s;s++)n=~(e-1)&(o[s]^t[s]),o[s]^=n,t[s]^=n}function L(e,a){var n,p,l,d=pe(),s=pe();for(n=0;16>n;n++)s[n]=a[n];for(t(s),t(s),t(s),p=0;2>p;p++){for(d[0]=s[0]-65517,n=1;15>n;n++)d[n]=s[n]-65535-(1&d[n-1]>>16),d[n-1]&=65535;d[15]=s[15]-32767-(1&d[14]>>16),l=1&d[15]>>16,d[14]&=65535,x(s,d,1-l)}for(n=0;16>n;n++)e[2*n]=255&s[n],e[2*n+1]=s[n]>>8}function R(o,t){var e=new Uint8Array(32),n=new Uint8Array(32);return L(e,o),L(n,t),v(e,0,n,0)}function M(o){var t=new Uint8Array(32);return L(t,o),1&t[0]}function j(o,t){var e;for(e=0;16>e;e++)o[e]=t[2*e]+(t[2*e+1]<<8);o[15]&=32767}function I(o,t,e){for(var n=0;16>n;n++)o[n]=t[n]+e[n]}function N(o,t,e){for(var n=0;16>n;n++)o[n]=t[n]-e[n]}function B(Q,t,e){var n,$,ee=0,te=0,oe=0,ne=0,re=0,se=0,ie=0,ae=0,ce=0,pe=0,le=0,de=0,ue=0,he=0,ye=0,ge=0,be=0,me=0,_e=0,fe=0,ke=0,ve=0,Se=0,Te=0,Ce=0,Pe=0,xe=0,Ee=0,Oe=0,we=0,Le=0,Re=e[0],I=e[1],N=e[2],B=e[3],D=e[4],z=e[5],H=e[6],q=e[7],F=e[8],X=e[9],J=e[10],Y=e[11],K=e[12],W=e[13],G=e[14],Z=e[15];ee+=(n=t[0])*Re,te+=n*I,oe+=n*N,ne+=n*B,re+=n*D,se+=n*z,ie+=n*H,ae+=n*q,ce+=n*F,pe+=n*X,le+=n*J,de+=n*Y,ue+=n*K,he+=n*W,ye+=n*G,ge+=n*Z,te+=(n=t[1])*Re,oe+=n*I,ne+=n*N,re+=n*B,se+=n*D,ie+=n*z,ae+=n*H,ce+=n*q,pe+=n*F,le+=n*X,de+=n*J,ue+=n*Y,he+=n*K,ye+=n*W,ge+=n*G,be+=n*Z,oe+=(n=t[2])*Re,ne+=n*I,re+=n*N,se+=n*B,ie+=n*D,ae+=n*z,ce+=n*H,pe+=n*q,le+=n*F,de+=n*X,ue+=n*J,he+=n*Y,ye+=n*K,ge+=n*W,be+=n*G,me+=n*Z,ne+=(n=t[3])*Re,re+=n*I,se+=n*N,ie+=n*B,ae+=n*D,ce+=n*z,pe+=n*H,le+=n*q,de+=n*F,ue+=n*X,he+=n*J,ye+=n*Y,ge+=n*K,be+=n*W,me+=n*G,_e+=n*Z,re+=(n=t[4])*Re,se+=n*I,ie+=n*N,ae+=n*B,ce+=n*D,pe+=n*z,le+=n*H,de+=n*q,ue+=n*F,he+=n*X,ye+=n*J,ge+=n*Y,be+=n*K,me+=n*W,_e+=n*G,fe+=n*Z,se+=(n=t[5])*Re,ie+=n*I,ae+=n*N,ce+=n*B,pe+=n*D,le+=n*z,de+=n*H,ue+=n*q,he+=n*F,ye+=n*X,ge+=n*J,be+=n*Y,me+=n*K,_e+=n*W,fe+=n*G,ke+=n*Z,ie+=(n=t[6])*Re,ae+=n*I,ce+=n*N,pe+=n*B,le+=n*D,de+=n*z,ue+=n*H,he+=n*q,ye+=n*F,ge+=n*X,be+=n*J,me+=n*Y,_e+=n*K,fe+=n*W,ke+=n*G,ve+=n*Z,ae+=(n=t[7])*Re,ce+=n*I,pe+=n*N,le+=n*B,de+=n*D,ue+=n*z,he+=n*H,ye+=n*q,ge+=n*F,be+=n*X,me+=n*J,_e+=n*Y,fe+=n*K,ke+=n*W,ve+=n*G,Se+=n*Z,ce+=(n=t[8])*Re,pe+=n*I,le+=n*N,de+=n*B,ue+=n*D,he+=n*z,ye+=n*H,ge+=n*q,be+=n*F,me+=n*X,_e+=n*J,fe+=n*Y,ke+=n*K,ve+=n*W,Se+=n*G,Te+=n*Z,pe+=(n=t[9])*Re,le+=n*I,de+=n*N,ue+=n*B,he+=n*D,ye+=n*z,ge+=n*H,be+=n*q,me+=n*F,_e+=n*X,fe+=n*J,ke+=n*Y,ve+=n*K,Se+=n*W,Te+=n*G,Ce+=n*Z,le+=(n=t[10])*Re,de+=n*I,ue+=n*N,he+=n*B,ye+=n*D,ge+=n*z,be+=n*H,me+=n*q,_e+=n*F,fe+=n*X,ke+=n*J,ve+=n*Y,Se+=n*K,Te+=n*W,Ce+=n*G,Pe+=n*Z,de+=(n=t[11])*Re,ue+=n*I,he+=n*N,ye+=n*B,ge+=n*D,be+=n*z,me+=n*H,_e+=n*q,fe+=n*F,ke+=n*X,ve+=n*J,Se+=n*Y,Te+=n*K,Ce+=n*W,Pe+=n*G,xe+=n*Z,ue+=(n=t[12])*Re,he+=n*I,ye+=n*N,ge+=n*B,be+=n*D,me+=n*z,_e+=n*H,fe+=n*q,ke+=n*F,ve+=n*X,Se+=n*J,Te+=n*Y,Ce+=n*K,Pe+=n*W,xe+=n*G,Ee+=n*Z,he+=(n=t[13])*Re,ye+=n*I,ge+=n*N,be+=n*B,me+=n*D,_e+=n*z,fe+=n*H,ke+=n*q,ve+=n*F,Se+=n*X,Te+=n*J,Ce+=n*Y,Pe+=n*K,xe+=n*W,Ee+=n*G,Oe+=n*Z,ye+=(n=t[14])*Re,ge+=n*I,be+=n*N,me+=n*B,_e+=n*D,fe+=n*z,ke+=n*H,ve+=n*q,Se+=n*F,Te+=n*X,Ce+=n*J,Pe+=n*Y,xe+=n*K,Ee+=n*W,Oe+=n*G,we+=n*Z,ge+=(n=t[15])*Re,te+=38*(me+=n*N),oe+=38*(_e+=n*B),ne+=38*(fe+=n*D),re+=38*(ke+=n*z),se+=38*(ve+=n*H),ie+=38*(Se+=n*q),ae+=38*(Te+=n*F),ce+=38*(Ce+=n*X),pe+=38*(Pe+=n*J),le+=38*(xe+=n*Y),de+=38*(Ee+=n*K),ue+=38*(Oe+=n*W),he+=38*(we+=n*G),ye+=38*(Le+=n*Z),ee=(n=(ee+=38*(be+=n*I))+($=1)+65535)-65536*($=Math.floor(n/65536)),te=(n=te+$+65535)-65536*($=Math.floor(n/65536)),oe=(n=oe+$+65535)-65536*($=Math.floor(n/65536)),ne=(n=ne+$+65535)-65536*($=Math.floor(n/65536)),re=(n=re+$+65535)-65536*($=Math.floor(n/65536)),se=(n=se+$+65535)-65536*($=Math.floor(n/65536)),ie=(n=ie+$+65535)-65536*($=Math.floor(n/65536)),ae=(n=ae+$+65535)-65536*($=Math.floor(n/65536)),ce=(n=ce+$+65535)-65536*($=Math.floor(n/65536)),pe=(n=pe+$+65535)-65536*($=Math.floor(n/65536)),le=(n=le+$+65535)-65536*($=Math.floor(n/65536)),de=(n=de+$+65535)-65536*($=Math.floor(n/65536)),ue=(n=ue+$+65535)-65536*($=Math.floor(n/65536)),he=(n=he+$+65535)-65536*($=Math.floor(n/65536)),ye=(n=ye+$+65535)-65536*($=Math.floor(n/65536)),ge=(n=ge+$+65535)-65536*($=Math.floor(n/65536)),ee=(n=(ee+=$-1+37*($-1))+($=1)+65535)-65536*($=Math.floor(n/65536)),te=(n=te+$+65535)-65536*($=Math.floor(n/65536)),oe=(n=oe+$+65535)-65536*($=Math.floor(n/65536)),ne=(n=ne+$+65535)-65536*($=Math.floor(n/65536)),re=(n=re+$+65535)-65536*($=Math.floor(n/65536)),se=(n=se+$+65535)-65536*($=Math.floor(n/65536)),ie=(n=ie+$+65535)-65536*($=Math.floor(n/65536)),ae=(n=ae+$+65535)-65536*($=Math.floor(n/65536)),ce=(n=ce+$+65535)-65536*($=Math.floor(n/65536)),pe=(n=pe+$+65535)-65536*($=Math.floor(n/65536)),le=(n=le+$+65535)-65536*($=Math.floor(n/65536)),de=(n=de+$+65535)-65536*($=Math.floor(n/65536)),ue=(n=ue+$+65535)-65536*($=Math.floor(n/65536)),he=(n=he+$+65535)-65536*($=Math.floor(n/65536)),ye=(n=ye+$+65535)-65536*($=Math.floor(n/65536)),ge=(n=ge+$+65535)-65536*($=Math.floor(n/65536)),ee+=$-1+37*($-1),Q[0]=ee,Q[1]=te,Q[2]=oe,Q[3]=ne,Q[4]=re,Q[5]=se,Q[6]=ie,Q[7]=ae,Q[8]=ce,Q[9]=pe,Q[10]=le,Q[11]=de,Q[12]=ue,Q[13]=he,Q[14]=ye,Q[15]=ge}function D(o,t){B(o,t,t)}function z(e,t){var n,s=pe();for(n=0;16>n;n++)s[n]=t[n];for(n=253;0<=n;n--)D(s,s),2!==n&&4!==n&&B(s,s,t);for(n=0;16>n;n++)e[n]=s[n]}function H(a,t,n){var r,g,b=new Uint8Array(32),s=new Float64Array(80),c=pe(),u=pe(),h=pe(),p=pe(),m=pe(),l=pe();for(g=0;31>g;g++)b[g]=t[g];for(b[31]=64|127&t[31],b[0]&=248,j(s,n),g=0;16>g;g++)u[g]=s[g],p[g]=c[g]=h[g]=0;for(c[0]=p[0]=1,g=254;0<=g;--g)x(c,u,r=1&b[g>>>3]>>>(7&g)),x(h,p,r),I(m,c,h),N(c,c,h),I(h,u,p),N(u,u,p),D(p,m),D(l,c),B(c,h,c),B(h,u,m),I(m,c,h),N(c,c,h),D(u,c),N(h,p,l),B(c,h,e),I(c,c,p),B(h,h,c),B(c,p,l),B(p,u,s),D(u,m),x(c,u,r),x(h,p,r);for(g=0;16>g;g++)s[g+16]=c[g],s[g+32]=h[g],s[g+48]=u[g],s[g+64]=p[g];var d=s.subarray(32),y=s.subarray(16);return z(d,d),B(y,y,d),L(a,y),0}function n(n,t){return H(n,t,o)}function q(o,t){return le(t,32),n(o,t)}function F(o,t,e){var n=new Uint8Array(32);return H(n,e,t),b(o,de,n,p)}function U(W,t,e,n){for(var V,Q,Z,$,ee,te,oe,ne,re,se,ie,ae,ce,pe,le,de,ue,he,ge,be,me,_e,fe,ke,ve,Se,Te=new Int32Array(16),x=new Int32Array(16),L=W[0],Ce=W[1],Pe=W[2],xe=W[3],Ee=W[4],Oe=W[5],we=W[6],Le=W[7],Re=t[0],Ae=t[1],Ie=t[2],Ne=t[3],De=t[4],je=t[5],Be=t[6],Me=t[7],ze=0;128<=n;){for(ge=0;16>ge;ge++)be=8*ge+ze,Te[ge]=e[be+0]<<24|e[be+1]<<16|e[be+2]<<8|e[be+3],x[ge]=e[be+4]<<24|e[be+5]<<16|e[be+6]<<8|e[be+7];for(ge=0;80>ge;ge++)if(V=L,Q=Ce,Z=Pe,$=xe,ee=Ee,te=Oe,oe=we,Le,re=Re,se=Ae,ie=Ie,ae=Ne,ce=De,pe=je,le=Be,Me,fe=65535&(_e=Me),ke=_e>>>16,ve=65535&(me=Le),Se=me>>>16,fe+=65535&(_e=(De>>>14|Ee<<18)^(De>>>18|Ee<<14)^(Ee>>>9|De<<23)),ke+=_e>>>16,ve+=65535&(me=(Ee>>>14|De<<18)^(Ee>>>18|De<<14)^(De>>>9|Ee<<23)),Se+=me>>>16,fe+=65535&(_e=De&je^~De&Be),ke+=_e>>>16,ve+=65535&(me=Ee&Oe^~Ee&we),Se+=me>>>16,me=ye[2*ge],fe+=65535&(_e=ye[2*ge+1]),ke+=_e>>>16,ve+=65535&me,Se+=me>>>16,me=Te[ge%16],ke+=(_e=x[ge%16])>>>16,ve+=65535&me,Se+=me>>>16,ve+=(ke+=(fe+=65535&_e)>>>16)>>>16,fe=65535&(_e=he=65535&fe|ke<<16),ke=_e>>>16,ve=65535&(me=ue=65535&ve|(Se+=ve>>>16)<<16),Se=me>>>16,fe+=65535&(_e=(Re>>>28|L<<4)^(L>>>2|Re<<30)^(L>>>7|Re<<25)),ke+=_e>>>16,ve+=65535&(me=(L>>>28|Re<<4)^(Re>>>2|L<<30)^(Re>>>7|L<<25)),Se+=me>>>16,ke+=(_e=Re&Ae^Re&Ie^Ae&Ie)>>>16,ve+=65535&(me=L&Ce^L&Pe^Ce&Pe),Se+=me>>>16,ne=65535&(ve+=(ke+=(fe+=65535&_e)>>>16)>>>16)|(Se+=ve>>>16)<<16,de=65535&fe|ke<<16,fe=65535&(_e=ae),ke=_e>>>16,ve=65535&(me=$),Se=me>>>16,ke+=(_e=he)>>>16,ve+=65535&(me=ue),Se+=me>>>16,Ce=V,Pe=Q,xe=Z,Ee=$=65535&(ve+=(ke+=(fe+=65535&_e)>>>16)>>>16)|(Se+=ve>>>16)<<16,Oe=ee,we=te,Le=oe,L=ne,Ae=re,Ie=se,Ne=ie,De=ae=65535&fe|ke<<16,je=ce,Be=pe,Me=le,Re=de,15==ge%16)for(be=0;16>be;be++)me=Te[be],fe=65535&(_e=x[be]),ke=_e>>>16,ve=65535&me,Se=me>>>16,me=Te[(be+9)%16],fe+=65535&(_e=x[(be+9)%16]),ke+=_e>>>16,ve+=65535&me,Se+=me>>>16,ue=Te[(be+1)%16],fe+=65535&(_e=((he=x[(be+1)%16])>>>1|ue<<31)^(he>>>8|ue<<24)^(he>>>7|ue<<25)),ke+=_e>>>16,ve+=65535&(me=(ue>>>1|he<<31)^(ue>>>8|he<<24)^ue>>>7),Se+=me>>>16,ue=Te[(be+14)%16],ke+=(_e=((he=x[(be+14)%16])>>>19|ue<<13)^(ue>>>29|he<<3)^(he>>>6|ue<<26))>>>16,ve+=65535&(me=(ue>>>19|he<<13)^(he>>>29|ue<<3)^ue>>>6),Se+=me>>>16,Se+=(ve+=(ke+=(fe+=65535&_e)>>>16)>>>16)>>>16,Te[be]=65535&ve|Se<<16,x[be]=65535&fe|ke<<16;fe=65535&(_e=Re),ke=_e>>>16,ve=65535&(me=L),Se=me>>>16,me=W[0],ke+=(_e=t[0])>>>16,ve+=65535&me,Se+=me>>>16,Se+=(ve+=(ke+=(fe+=65535&_e)>>>16)>>>16)>>>16,W[0]=L=65535&ve|Se<<16,t[0]=Re=65535&fe|ke<<16,fe=65535&(_e=Ae),ke=_e>>>16,ve=65535&(me=Ce),Se=me>>>16,me=W[1],ke+=(_e=t[1])>>>16,ve+=65535&me,Se+=me>>>16,Se+=(ve+=(ke+=(fe+=65535&_e)>>>16)>>>16)>>>16,W[1]=Ce=65535&ve|Se<<16,t[1]=Ae=65535&fe|ke<<16,fe=65535&(_e=Ie),ke=_e>>>16,ve=65535&(me=Pe),Se=me>>>16,me=W[2],ke+=(_e=t[2])>>>16,ve+=65535&me,Se+=me>>>16,Se+=(ve+=(ke+=(fe+=65535&_e)>>>16)>>>16)>>>16,W[2]=Pe=65535&ve|Se<<16,t[2]=Ie=65535&fe|ke<<16,fe=65535&(_e=Ne),ke=_e>>>16,ve=65535&(me=xe),Se=me>>>16,me=W[3],ke+=(_e=t[3])>>>16,ve+=65535&me,Se+=me>>>16,Se+=(ve+=(ke+=(fe+=65535&_e)>>>16)>>>16)>>>16,W[3]=xe=65535&ve|Se<<16,t[3]=Ne=65535&fe|ke<<16,fe=65535&(_e=De),ke=_e>>>16,ve=65535&(me=Ee),Se=me>>>16,me=W[4],ke+=(_e=t[4])>>>16,ve+=65535&me,Se+=me>>>16,Se+=(ve+=(ke+=(fe+=65535&_e)>>>16)>>>16)>>>16,W[4]=Ee=65535&ve|Se<<16,t[4]=De=65535&fe|ke<<16,fe=65535&(_e=je),ke=_e>>>16,ve=65535&(me=Oe),Se=me>>>16,me=W[5],ke+=(_e=t[5])>>>16,ve+=65535&me,Se+=me>>>16,Se+=(ve+=(ke+=(fe+=65535&_e)>>>16)>>>16)>>>16,W[5]=Oe=65535&ve|Se<<16,t[5]=je=65535&fe|ke<<16,fe=65535&(_e=Be),ke=_e>>>16,ve=65535&(me=we),Se=me>>>16,me=W[6],ke+=(_e=t[6])>>>16,ve+=65535&me,Se+=me>>>16,Se+=(ve+=(ke+=(fe+=65535&_e)>>>16)>>>16)>>>16,W[6]=we=65535&ve|Se<<16,t[6]=Be=65535&fe|ke<<16,fe=65535&(_e=Me),ke=_e>>>16,ve=65535&(me=Le),Se=me>>>16,me=W[7],ke+=(_e=t[7])>>>16,ve+=65535&me,Se+=me>>>16,Se+=(ve+=(ke+=(fe+=65535&_e)>>>16)>>>16)>>>16,W[7]=Le=65535&ve|Se<<16,t[7]=Me=65535&fe|ke<<16,ze+=128,n-=128}return n}function X(a,t,e){var p,l=new Int32Array(8),o=new Int32Array(8),i=new Uint8Array(256),s=e;for(l[0]=1779033703,l[1]=3144134277,l[2]=1013904242,l[3]=2773480762,l[4]=1359893119,l[5]=2600822924,l[6]=528734635,l[7]=1541459225,o[0]=4089235720,o[1]=2227873595,o[2]=4271175723,o[3]=1595750129,o[4]=2917565137,o[5]=725511199,o[6]=4215389547,o[7]=327033209,U(l,o,t,e),e%=128,p=0;p<e;p++)i[p]=t[s-e+p];for(i[e]=128,i[(e=256-128*(112>e?1:0))-9]=0,ee(i,e-8,0|s/536870912,s<<3),U(l,o,i,e),p=0;8>p;p++)ee(a,8*p,l[p],o[p]);return 0}function G(e,t){var n=pe(),r=pe(),o=pe(),i=pe(),s=pe(),c=pe(),a=pe(),l=pe(),p=pe();N(n,e[1],e[0]),N(p,t[1],t[0]),B(n,n,p),I(r,e[0],e[1]),I(p,t[0],t[1]),B(r,r,p),B(o,e[3],t[3]),B(o,o,he),B(i,e[2],t[2]),I(i,i,i),N(s,r,n),N(c,i,o),I(a,i,o),I(l,r,n),B(e[0],s,c),B(e[1],l,a),B(e[2],a,c),B(e[3],s,l)}function J(o,t,e){var n;for(n=0;4>n;n++)x(o[n],t[n],e)}function V(e,t){var n=pe(),r=pe(),o=pe();z(o,t[2]),B(n,t[0],o),B(r,t[1],o),L(e,r),e[31]^=M(n)<<7}function Q(i,t,e){var n,a;for(P(i[0],ue),P(i[1],s),P(i[2],s),P(i[3],ue),a=255;0<=a;--a)J(i,t,n=1&e[0|a/8]>>(7&a)),G(t,i),G(i,i),J(i,t,n)}function Z(e,t){var o=[pe(),pe(),pe(),pe()];P(o[0],i),P(o[1],a),P(o[2],s),B(o[3],i,a),Q(e,o,t)}function $(e,t,n){var o,r=new Uint8Array(64),s=[pe(),pe(),pe(),pe()];for(n||le(t,32),X(r,t,32),r[0]&=248,r[31]&=127,r[31]|=64,Z(s,r),V(e,s),o=0;32>o;o++)t[o+32]=e[o];return 0}function te(s,t){var e,a,c,p;for(a=63;32<=a;--a){for(e=0,c=a-32,p=a-12;c<p;++c)t[c]+=e-16*t[a]*f[c-(a-32)],e=t[c]+128>>8,t[c]-=256*e;t[c]+=e,t[a]=0}for(e=0,c=0;32>c;c++)t[c]+=e-(t[31]>>4)*f[c],e=t[c]>>8,t[c]&=255;for(c=0;32>c;c++)t[c]-=e*f[c];for(a=0;32>a;a++)t[a+1]+=t[a]>>8,s[a]=255&t[a]}function oe(o){var t,r=new Float64Array(64);for(t=0;64>t;t++)r[t]=o[t];for(t=0;64>t;t++)o[t]=0;te(o,r)}function ne(e,t,n,r){var o,l,d=new Uint8Array(64),c=new Uint8Array(64),a=new Uint8Array(64),u=new Float64Array(64),h=[pe(),pe(),pe(),pe()];X(d,r,32),d[0]&=248,d[31]&=127,d[31]|=64;for(o=0;o<n;o++)e[64+o]=t[o];for(o=0;32>o;o++)e[32+o]=d[32+o];for(X(a,e.subarray(32),n+32),oe(a),Z(h,a),V(e,h),o=32;64>o;o++)e[o]=r[o];for(X(c,e,n+64),oe(c),o=0;64>o;o++)u[o]=0;for(o=0;32>o;o++)u[o]=a[o];for(o=0;32>o;o++)for(l=0;32>l;l++)u[o+l]+=c[o]*d[l];return te(e.subarray(32),u),n+64}function re(e,t){var n=pe(),r=pe(),o=pe(),i=pe(),a=pe(),l=pe(),p=pe();return P(e[2],s),j(e[1],t),D(o,e[1]),B(i,o,c),N(o,o,e[2]),I(i,e[2],i),D(a,i),D(l,a),B(p,l,a),B(n,p,o),B(n,n,i),function(e,t){var n,s=pe();for(n=0;16>n;n++)s[n]=t[n];for(n=250;0<=n;n--)D(s,s),1!==n&&B(s,s,t);for(n=0;16>n;n++)e[n]=s[n]}(n,n),B(n,n,o),B(n,n,i),B(n,n,i),B(e[0],n,i),D(r,e[0]),B(r,r,i),R(r,o)&&B(e[0],e[0],u),D(r,e[0]),B(r,r,i),R(r,o)?-1:(M(e[0])===t[31]>>7&&N(e[0],ue,e[0]),B(e[3],e[0],e[1]),0)}function se(e,t,n,p){var o,l=new Uint8Array(32),s=new Uint8Array(64),c=[pe(),pe(),pe(),pe()],a=[pe(),pe(),pe(),pe()];if(-1,64>n)return-1;if(re(a,p))return-1;for(o=0;o<n;o++)e[o]=t[o];for(o=0;32>o;o++)e[o+32]=p[o];if(X(s,e,n),oe(s),Q(c,a,s),Z(a,t.subarray(32)),G(c,a),V(l,c),n-=64,v(t,0,l,0)){for(o=0;o<n;o++)e[o]=0;return-1}for(o=0;o<n;o++)e[o]=t[o+64];return n}function ie(o,t){if(o.length!==32)throw new Error("bad key size");if(24!==t.length)throw new Error("bad nonce size")}function ae(){for(var e=0;e<arguments.length;e++)if(!(arguments[e]instanceof Uint8Array))throw new TypeError("unexpected type, use Uint8Array")}function ce(o){for(var t=0;t<o.length;t++)o[t]=0}var pe=function(o){var t,r=new Float64Array(16);if(o)for(t=0;t<o.length;t++)r[t]=o[t];return r},le=function(){throw new Error("no PRNG")},de=new Uint8Array(16),o=new Uint8Array(32);o[0]=9;var ue=pe(),s=pe([1]),e=pe([56129,1]),c=pe([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),he=pe([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),i=pe([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),a=pe([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),u=pe([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]),p=new Uint8Array([101,120,112,97,110,100,32,51,50,45,98,121,116,101,32,107]),l=function(p){var t,l,d,u,h,y,g,b;this.buffer=new Uint8Array(16),this.r=new Uint16Array(10),this.h=new Uint16Array(10),this.pad=new Uint16Array(8),this.leftover=0,this.fin=0,t=255&p[0]|(255&p[1])<<8,this.r[0]=8191&t,l=255&p[2]|(255&p[3])<<8,this.r[1]=8191&(t>>>13|l<<3),d=255&p[4]|(255&p[5])<<8,this.r[2]=7939&(l>>>10|d<<6),u=255&p[6]|(255&p[7])<<8,this.r[3]=8191&(d>>>7|u<<9),h=255&p[8]|(255&p[9])<<8,this.r[4]=255&(u>>>4|h<<12),this.r[5]=8190&h>>>1,y=255&p[10]|(255&p[11])<<8,this.r[6]=8191&(h>>>14|y<<2),g=255&p[12]|(255&p[13])<<8,this.r[7]=8065&(y>>>11|g<<5),b=255&p[14]|(255&p[15])<<8,this.r[8]=8191&(g>>>8|b<<8),this.r[9]=127&b>>>5,this.pad[0]=255&p[16]|(255&p[17])<<8,this.pad[1]=255&p[18]|(255&p[19])<<8,this.pad[2]=255&p[20]|(255&p[21])<<8,this.pad[3]=255&p[22]|(255&p[23])<<8,this.pad[4]=255&p[24]|(255&p[25])<<8,this.pad[5]=255&p[26]|(255&p[27])<<8,this.pad[6]=255&p[28]|(255&p[29])<<8,this.pad[7]=255&p[30]|(255&p[31])<<8};l.prototype.blocks=function(F,t,X){for(var Y,K,W,G,J,V,Q,Z,$,ee,te,oe,ne,re,se,ie,ae,ce,pe,le=this.fin?0:2048,S=this.h[0],de=this.h[1],ue=this.h[2],he=this.h[3],ye=this.h[4],ge=this.h[5],be=this.h[6],me=this.h[7],_e=this.h[8],fe=this.h[9],ke=this.r[0],U=this.r[1],M=this.r[2],j=this.r[3],I=this.r[4],N=this.r[5],B=this.r[6],D=this.r[7],z=this.r[8],H=this.r[9];16<=X;)ee=$=0,ee+=(S+=8191&(Y=255&F[t+0]|(255&F[t+1])<<8))*ke,ee+=(de+=8191&(Y>>>13|(K=255&F[t+2]|(255&F[t+3])<<8)<<3))*(5*H),ee+=(ue+=8191&(K>>>10|(W=255&F[t+4]|(255&F[t+5])<<8)<<6))*(5*z),ee+=(he+=8191&(W>>>7|(G=255&F[t+6]|(255&F[t+7])<<8)<<9))*(5*D),$=(ee+=(ye+=8191&(G>>>4|(J=255&F[t+8]|(255&F[t+9])<<8)<<12))*(5*B))>>>13,ee&=8191,ee+=(ge+=8191&J>>>1)*(5*N),ee+=(be+=8191&(J>>>14|(V=255&F[t+10]|(255&F[t+11])<<8)<<2))*(5*I),ee+=(me+=8191&(V>>>11|(Q=255&F[t+12]|(255&F[t+13])<<8)<<5))*(5*j),ee+=(_e+=8191&(Q>>>8|(Z=255&F[t+14]|(255&F[t+15])<<8)<<8))*(5*M),te=$+=(ee+=(fe+=Z>>>5|le)*(5*U))>>>13,te+=S*U,te+=de*ke,te+=ue*(5*H),te+=he*(5*z),$=(te+=ye*(5*D))>>>13,te&=8191,te+=ge*(5*B),te+=be*(5*N),te+=me*(5*I),te+=_e*(5*j),$+=(te+=fe*(5*M))>>>13,te&=8191,oe=$,oe+=S*M,oe+=de*U,oe+=ue*ke,oe+=he*(5*H),$=(oe+=ye*(5*z))>>>13,oe&=8191,oe+=ge*(5*D),oe+=be*(5*B),oe+=me*(5*N),oe+=_e*(5*I),ne=$+=(oe+=fe*(5*j))>>>13,ne+=S*j,ne+=de*M,ne+=ue*U,ne+=he*ke,$=(ne+=ye*(5*H))>>>13,ne&=8191,ne+=ge*(5*z),ne+=be*(5*D),ne+=me*(5*B),ne+=_e*(5*N),re=$+=(ne+=fe*(5*I))>>>13,re+=S*I,re+=de*j,re+=ue*M,re+=he*U,$=(re+=ye*ke)>>>13,re&=8191,re+=ge*(5*H),re+=be*(5*z),re+=me*(5*D),re+=_e*(5*B),se=$+=(re+=fe*(5*N))>>>13,se+=S*N,se+=de*I,se+=ue*j,se+=he*M,$=(se+=ye*U)>>>13,se&=8191,se+=ge*ke,se+=be*(5*H),se+=me*(5*z),se+=_e*(5*D),ie=$+=(se+=fe*(5*B))>>>13,ie+=S*B,ie+=de*N,ie+=ue*I,ie+=he*j,$=(ie+=ye*M)>>>13,ie&=8191,ie+=ge*U,ie+=be*ke,ie+=me*(5*H),ie+=_e*(5*z),ae=$+=(ie+=fe*(5*D))>>>13,ae+=S*D,ae+=de*B,ae+=ue*N,ae+=he*I,$=(ae+=ye*j)>>>13,ae&=8191,ae+=ge*M,ae+=be*U,ae+=me*ke,ae+=_e*(5*H),ce=$+=(ae+=fe*(5*z))>>>13,ce+=S*z,ce+=de*D,ce+=ue*B,ce+=he*N,$=(ce+=ye*I)>>>13,ce&=8191,ce+=ge*j,ce+=be*M,ce+=me*U,ce+=_e*ke,pe=$+=(ce+=fe*(5*H))>>>13,pe+=S*H,pe+=de*z,pe+=ue*D,pe+=he*B,$=(pe+=ye*N)>>>13,pe&=8191,pe+=ge*I,pe+=be*j,pe+=me*M,pe+=_e*U,S=ee=8191&($=0|($=0|(($+=(pe+=fe*ke)>>>13)<<2)+$)+(ee&=8191)),de=te+=$>>>=13,ue=oe&=8191,he=ne&=8191,ye=re&=8191,ge=se&=8191,be=ie&=8191,me=ae&=8191,_e=ce&=8191,fe=pe&=8191,t+=16,X-=16;this.h[0]=S,this.h[1]=de,this.h[2]=ue,this.h[3]=he,this.h[4]=ye,this.h[5]=ge,this.h[6]=be,this.h[7]=me,this.h[8]=_e,this.h[9]=fe},l.prototype.finish=function(a,t){var e,c,p,l,d=new Uint16Array(10);if(this.leftover){for(l=this.leftover,this.buffer[l++]=1;16>l;l++)this.buffer[l]=0;this.fin=1,this.blocks(this.buffer,0,16)}for(e=this.h[1]>>>13,this.h[1]&=8191,l=2;10>l;l++)this.h[l]+=e,e=this.h[l]>>>13,this.h[l]&=8191;for(this.h[0]+=5*e,e=this.h[0]>>>13,this.h[0]&=8191,this.h[1]+=e,e=this.h[1]>>>13,this.h[1]&=8191,this.h[2]+=e,d[0]=this.h[0]+5,e=d[0]>>>13,d[0]&=8191,l=1;10>l;l++)d[l]=this.h[l]+e,e=d[l]>>>13,d[l]&=8191;for(d[9]-=8192,c=(1^e)-1,l=0;10>l;l++)d[l]&=c;for(c=~c,l=0;10>l;l++)this.h[l]=this.h[l]&c|d[l];for(this.h[0]=65535&(this.h[0]|this.h[1]<<13),this.h[1]=65535&(this.h[1]>>>3|this.h[2]<<10),this.h[2]=65535&(this.h[2]>>>6|this.h[3]<<7),this.h[3]=65535&(this.h[3]>>>9|this.h[4]<<4),this.h[4]=65535&(this.h[4]>>>12|this.h[5]<<1|this.h[6]<<14),this.h[5]=65535&(this.h[6]>>>2|this.h[7]<<11),this.h[6]=65535&(this.h[7]>>>5|this.h[8]<<8),this.h[7]=65535&(this.h[8]>>>8|this.h[9]<<5),p=this.h[0]+this.pad[0],this.h[0]=65535&p,l=1;8>l;l++)p=0|(0|this.h[l]+this.pad[l])+(p>>>16),this.h[l]=65535&p;a[t+0]=255&this.h[0]>>>0,a[t+1]=255&this.h[0]>>>8,a[t+2]=255&this.h[1]>>>0,a[t+3]=255&this.h[1]>>>8,a[t+4]=255&this.h[2]>>>0,a[t+5]=255&this.h[2]>>>8,a[t+6]=255&this.h[3]>>>0,a[t+7]=255&this.h[3]>>>8,a[t+8]=255&this.h[4]>>>0,a[t+9]=255&this.h[4]>>>8,a[t+10]=255&this.h[5]>>>0,a[t+11]=255&this.h[5]>>>8,a[t+12]=255&this.h[6]>>>0,a[t+13]=255&this.h[6]>>>8,a[t+14]=255&this.h[7]>>>0,a[t+15]=255&this.h[7]>>>8},l.prototype.update=function(s,t,i){var a,c;if(this.leftover){for((c=16-this.leftover)>i&&(c=i),a=0;a<c;a++)this.buffer[this.leftover+a]=s[t+a];if(i-=c,t+=c,this.leftover+=c,16>this.leftover)return;this.blocks(this.buffer,0,16),this.leftover=0}if(16<=i&&(c=i-i%16,this.blocks(s,t,c),t+=c,i-=c),i){for(a=0;a<i;a++)this.buffer[this.leftover+a]=s[t+a];this.leftover+=i}};var h=A,ye=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],f=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]),O=32,w=24,Y=32,W=32,ge=w;K.lowlevel={crypto_core_hsalsa20:b,crypto_stream_xor:k,crypto_stream:S,crypto_stream_salsa20_xor:m,crypto_stream_salsa20:_,crypto_onetimeauth:T,crypto_onetimeauth_verify:C,crypto_verify_16:y,crypto_verify_32:v,crypto_secretbox:A,crypto_secretbox_open:E,crypto_scalarmult:H,crypto_scalarmult_base:n,crypto_box_beforenm:F,crypto_box_afternm:h,crypto_box:function(a,t,e,n,r,o){var i=new Uint8Array(32);return F(i,r,o),h(a,t,e,n,i)},crypto_box_open:function(a,t,e,n,r,o){var i=new Uint8Array(32);return F(i,r,o),E(a,t,e,n,i)},crypto_box_keypair:q,crypto_hash:X,crypto_sign:ne,crypto_sign_keypair:$,crypto_sign_open:se,crypto_secretbox_KEYBYTES:O,crypto_secretbox_NONCEBYTES:w,crypto_secretbox_ZEROBYTES:32,crypto_secretbox_BOXZEROBYTES:16,crypto_scalarmult_BYTES:32,crypto_scalarmult_SCALARBYTES:32,crypto_box_PUBLICKEYBYTES:Y,crypto_box_SECRETKEYBYTES:W,crypto_box_BEFORENMBYTES:32,crypto_box_NONCEBYTES:ge,crypto_box_ZEROBYTES:32,crypto_box_BOXZEROBYTES:16,crypto_sign_BYTES:64,crypto_sign_PUBLICKEYBYTES:32,crypto_sign_SECRETKEYBYTES:64,crypto_sign_SEEDBYTES:32,crypto_hash_BYTES:64},K.randomBytes=function(o){var t=new Uint8Array(o);return le(t,o),t},K.secretbox=function(s,t,e){ae(s,t,e),ie(e,t);for(var n=new Uint8Array(32+s.length),r=new Uint8Array(n.length),o=0;o<s.length;o++)n[o+32]=s[o];return A(r,n,n.length,t,e),r.subarray(16)},K.secretbox.open=function(s,t,e){ae(s,t,e),ie(e,t);for(var n=new Uint8Array(16+s.length),r=new Uint8Array(n.length),o=0;o<s.length;o++)n[o+16]=s[o];return 32>n.length?null:0===E(r,n,n.length,t,e)?r.subarray(32):null},K.secretbox.keyLength=O,K.secretbox.nonceLength=w,K.secretbox.overheadLength=16,K.scalarMult=function(o,t){if(ae(o,t),32!==o.length)throw new Error("bad n size");if(32!==t.length)throw new Error("bad p size");var e=new Uint8Array(32);return H(e,o,t),e},K.scalarMult.base=function(o){if(ae(o),32!==o.length)throw new Error("bad n size");var t=new Uint8Array(32);return n(t,o),t},K.scalarMult.scalarLength=32,K.scalarMult.groupElementLength=32,K.box=function(t,e,n,r){var o=K.box.before(n,r);return K.secretbox(t,e,o)},K.box.before=function(o,t){ae(o,t),function(o,t){if(o.length!==Y)throw new Error("bad public key size");if(t.length!==W)throw new Error("bad secret key size")}(o,t);var e=new Uint8Array(32);return F(e,o,t),e},K.box.after=K.secretbox,K.box.open=function(t,e,n,r){var o=K.box.before(n,r);return K.secretbox.open(t,e,o)},K.box.open.after=K.secretbox.open,K.box.keyPair=function(){var o=new Uint8Array(Y),t=new Uint8Array(W);return q(o,t),{publicKey:o,secretKey:t}},K.box.keyPair.fromSecretKey=function(o){if(ae(o),o.length!==W)throw new Error("bad secret key size");var t=new Uint8Array(Y);return n(t,o),{publicKey:t,secretKey:new Uint8Array(o)}},K.box.publicKeyLength=Y,K.box.secretKeyLength=W,K.box.sharedKeyLength=32,K.box.nonceLength=ge,K.box.overheadLength=K.secretbox.overheadLength,K.sign=function(o,t){if(ae(o,t),64!==t.length)throw new Error("bad secret key size");var e=new Uint8Array(64+o.length);return ne(e,o,o.length,t),e},K.sign.open=function(s,t){if(ae(s,t),32!==t.length)throw new Error("bad public key size");var e=new Uint8Array(s.length),n=se(e,s,s.length,t);if(0>n)return null;for(var r=new Uint8Array(n),o=0;o<r.length;o++)r[o]=e[o];return r},K.sign.detached=function(t,e){for(var n=K.sign(t,e),r=new Uint8Array(64),o=0;o<r.length;o++)r[o]=n[o];return r},K.sign.detached.verify=function(s,t,e){if(ae(s,t,e),64!==t.length)throw new Error("bad signature size");if(32!==e.length)throw new Error("bad public key size");var n,a=new Uint8Array(64+s.length),o=new Uint8Array(64+s.length);for(n=0;64>n;n++)a[n]=t[n];for(n=0;n<s.length;n++)a[n+64]=s[n];return 0<=se(o,a,a.length,e)},K.sign.keyPair=function(){var o=new Uint8Array(32),t=new Uint8Array(64);return $(o,t),{publicKey:o,secretKey:t}},K.sign.keyPair.fromSecretKey=function(o){if(ae(o),64!==o.length)throw new Error("bad secret key size");for(var t=new Uint8Array(32),e=0;e<t.length;e++)t[e]=o[32+e];return{publicKey:t,secretKey:new Uint8Array(o)}},K.sign.keyPair.fromSeed=function(o){if(ae(o),32!==o.length)throw new Error("bad seed size");for(var t=new Uint8Array(32),e=new Uint8Array(64),n=0;32>n;n++)e[n]=o[n];return $(t,e,!0),{publicKey:t,secretKey:e}},K.sign.publicKeyLength=32,K.sign.secretKeyLength=64,K.sign.seedLength=32,K.sign.signatureLength=64,K.hash=function(o){ae(o);var t=new Uint8Array(64);return X(t,o,o.length),t},K.hash.hashLength=64,K.verify=function(o,t){return ae(o,t),0!==o.length&&0!==t.length&&o.length===t.length&&0===d(o,0,t,0,o.length)},K.setPRNG=function(e){le=e},function(){var s="undefined"==typeof self?null:self.crypto||self.msCrypto;s&&s.getRandomValues?K.setPRNG(function(e,t){var n,i=new Uint8Array(t);for(n=0;n<t;n+=65536)s.getRandomValues(i.subarray(n,n+Math.min(t-n,65536)));for(n=0;n<t;n++)e[n]=i[n];ce(i)}):(s=r(3))&&s.randomBytes&&K.setPRNG(function(e,t){var n,i=s.randomBytes(t);for(n=0;n<t;n++)e[n]=i[n];ce(i)})}()}(o.exports?o.exports:self.nacl=self.nacl||{})},function(o){!function(t,e){"use strict";o.exports?o.exports=e():t.nacl?t.nacl.util=e():(t.nacl={},t.nacl.util=e())}(this,function(){"use strict";function s(e){if(!/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e))throw new TypeError("invalid encoding")}var e={};return e.decodeUTF8=function(o){if("string"!=typeof o)throw new TypeError("expected string");var t,s=unescape(encodeURIComponent(o)),n=new Uint8Array(s.length);for(t=0;t<s.length;t++)n[t]=s.charCodeAt(t);return n},e.encodeUTF8=function(o){var t,r=[];for(t=0;t<o.length;t++)r.push(String.fromCharCode(o[t]));return decodeURIComponent(escape(r.join("")))},"undefined"==typeof atob?void 0===Buffer.from?(e.encodeBase64=function(e){return new Buffer(e).toString("base64")},e.decodeBase64=function(e){return s(e),new Uint8Array(Array.prototype.slice.call(new Buffer(e,"base64"),0))}):(e.encodeBase64=function(e){return Buffer.from(e).toString("base64")},e.decodeBase64=function(e){return s(e),new Uint8Array(Array.prototype.slice.call(Buffer.from(e,"base64"),0))}):(e.encodeBase64=function(o){var t,s=[],n=o.length;for(t=0;t<n;t++)s.push(String.fromCharCode(o[t]));return btoa(s.join(""))},e.decodeBase64=function(e){s(e);var t,i=atob(e),r=new Uint8Array(i.length);for(t=0;t<i.length;t++)r[t]=i.charCodeAt(t);return r}),e})},function(o,t,e){o.exports=e(4).default},function(){},function(Y,t,e){"use strict";function G(e){window.clearTimeout(e)}function _(e){window.clearInterval(e)}function V(s){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];for(var a,c=0;c<t.length;c++)for(var p in a=t[c],a)s[p]=a[p]&&a[p].constructor&&a[p].constructor===Object?V(s[p]||{},a[p]):a[p];return s}function S(){for(var o=["Pusher"],t=0;t<arguments.length;t++)"string"==typeof arguments[t]?o.push(arguments[t]):o.push(N(arguments[t]));return o.join(" : ")}function C(s,t){var e=Array.prototype.indexOf;if(null===s)return-1;if(e&&s.indexOf===e)return s.indexOf(t);for(var n=0,i=s.length;n<i;n++)if(s[n]===t)return n;return-1}function E(o,t){for(var e in o)Object.prototype.hasOwnProperty.call(o,e)&&t(o[e],e,o)}function P(o){var r=[];return E(o,function(e,t){r.push(t)}),r}function x(o,t,e){for(var n=0;n<o.length;n++)t.call(e||window,o[n],n,o)}function L(o,t){for(var e=[],n=0;n<o.length;n++)e.push(t(o[n],n,o,e));return e}function R(o,t){t=t||function(e){return!!e};for(var s=[],n=0;n<o.length;n++)t(o[n],n,o,s)&&s.push(o[n]);return s}function A(s,t){var e={};return E(s,function(n,r){(t&&t(n,r,s,e)||!!n)&&(e[r]=n)}),e}function n(o,t){for(var e=0;e<o.length;e++)if(t(o[e],e,o))return!0;return!1}function j(o){return s=function(o){return"object"==typeof o&&(o=N(o)),encodeURIComponent((n=o.toString(),g(y(n))));var n},i={},E(o,function(e,t){i[t]=s(e)}),i;var s,i}function I(o){var t,s,i=A(o,function(e){return void 0!==e});return L((t=j(i),s=[],E(t,function(o,t){s.push([t,o])}),s),T.method("join","=")).join("&")}function N(o){try{return JSON.stringify(o)}catch(e){return JSON.stringify((a=[],p=[],function e(t,n){var o,r,l;switch(typeof t){case"object":if(!t)return null;for(o=0;o<a.length;o+=1)if(a[o]===t)return{$ref:p[o]};if(a.push(t),p.push(n),"[object Array]"===Object.prototype.toString.apply(t))for(l=[],o=0;o<t.length;o+=1)l[o]=e(t[o],n+"["+o+"]");else for(r in l={},t)Object.prototype.hasOwnProperty.call(t,r)&&(l[r]=e(t[r],n+"["+JSON.stringify(r)+"]"));return l;case"number":case"string":case"boolean":return t;}}(o,"$")))}var a,p}function B(o,t,e){return o+(t.useTLS?"":"")+"://"+(t.useTLS?t.hostTLS:t.hostNonTLS)+e}function M(o,t){return"/app/"+o+("?protocol="+Te.PROTOCOL+"&client=js&version="+Te.VERSION+(t?"&"+t:""))}function U(e){return"_"+e}function K(e){e.error||e.aborted||(e.abort(),e.aborted=!0)}function W(e){return"pusherTransport"+(e?"TLS":"NonTLS")}function Z(o){var t=be.getLocalStorage();if(t)try{delete t[W(o)]}catch(e){}}function $(e){return function(){return e.isSupported()}}function te(o){var t=-1===o.indexOf("?")?"?":"&";return o+t+"t="+ +new Date+"&n="+he++}function oe(e){return Math.floor(Math.random()*e)}function le(o,t){return T.defer(function(){t(o)}),{abort:function(){},forceMinPriority:function(){}}}e.r(t);for(var me=function(){function e(o,t){this.lastId=0,this.prefix=o,this.name=t}return e.prototype.create=function(s){this.lastId++;var t=this.lastId,e=this.prefix+t,n=this.name+"["+t+"]",r=!1,a=function(){r||(s.apply(null,arguments),r=!0)};return this[t]=a,{number:t,id:e,name:n,callback:a}},e.prototype.remove=function(e){delete this[e.number]},e}(),fe=new me("_pusher_script_","Pusher.ScriptReceivers"),Te={VERSION:"5.0.3",PROTOCOL:7,host:"ws.pusherapp.com",ws_port:80,wss_port:443,ws_path:"",sockjs_host:"sockjs.pusher.com",sockjs_http_port:80,sockjs_https_port:443,sockjs_path:"/pusher",stats_host:"stats.pusher.com",channel_auth_endpoint:"/pusher/auth",channel_auth_transport:"ajax",activity_timeout:12e4,pong_timeout:3e4,unavailable_timeout:1e4,cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},o=function(){function e(e){this.options=e,this.receivers=e.receivers||fe,this.loading={}}return e.prototype.load=function(a,t,e){var p=this;if(p.loading[a]&&0<p.loading[a].length)p.loading[a].push(e);else{p.loading[a]=[e];var n=be.createScriptRequest(p.getPath(a,t)),o=p.receivers.create(function(t){if(p.receivers.remove(o),p.loading[a]){var e=p.loading[a];delete p.loading[a];for(var r=function(e){e||n.cleanup()},s=0;s<e.length;s++)e[s](t,r)}});n.send(o)}},e.prototype.getRoot=function(o){var t=be.getDocument().location.protocol;return(o&&o.useTLS||"https:"===t?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version},e.prototype.getPath=function(o,t){return this.getRoot(t)+"/"+o+this.options.suffix+".js"},e}(),r=new me("_pusher_dependencies","Pusher.DependenciesReceivers"),s=new o({cdn_http:Te.cdn_http,cdn_https:Te.cdn_https,version:Te.VERSION,suffix:Te.dependency_suffix,receivers:r}),i=String.fromCharCode,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c={},p=0,u=a.length;p<u;p++)c[a.charAt(p)]=p;var l,h=function(o){var t=o.charCodeAt(0);return 128>t?o:2048>t?i(192|t>>>6)+i(128|63&t):i(224|15&t>>>12)+i(128|63&t>>>6)+i(128|63&t)},y=function(e){return e.replace(/[^\x00-\x7F]/g,h)},v=function(o){var t=[0,2,1][o.length%3],e=o.charCodeAt(0)<<16|(1<o.length?o.charCodeAt(1):0)<<8|(2<o.length?o.charCodeAt(2):0);return[a.charAt(e>>>18),a.charAt(63&e>>>12),2<=t?"=":a.charAt(63&e>>>6),1<=t?"=":a.charAt(63&e)].join("")},g=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,v)},b=function(){function e(s,t,e,n){var r=this;this.clear=t,this.timer=s(function(){r.timer&&(r.timer=n(r.timer))},e)}return e.prototype.isRunning=function(){return null!==this.timer},e.prototype.ensureAborted=function(){this.timer&&(this.clear(this.timer),this.timer=null)},e}(),m=(l=function(o,t){return(l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e])})(o,t)},function(o,t){function e(){this.constructor=o}l(o,t),o.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}),w=function(o){function t(t,e){return o.call(this,setTimeout,G,t,function(){return e(),null})||this}return m(t,o),t}(b),k=function(o){function t(t,e){return o.call(this,setInterval,_,t,function(o){return e(),o})||this}return m(t,o),t}(b),T={now:function(){return Date.now?Date.now():new Date().valueOf()},defer:function(e){return new w(0,e)},method:function(o){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var s=Array.prototype.slice.call(arguments,1);return function(t){return t[o].apply(t,s.concat(arguments))}}},O=new(function(){function e(){this.globalLog=function(e){window.console&&window.console.log&&window.console.log(e)}}return e.prototype.debug=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];this.log(this.globalLog,o)},e.prototype.warn=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];this.log(this.globalLogWarn,o)},e.prototype.error=function(){for(var o=[],t=0;t<arguments.length;t++)o[t]=arguments[t];this.log(this.globalLogError,o)},e.prototype.globalLogWarn=function(e){window.console&&window.console.warn?window.console.warn(e):this.globalLog(e)},e.prototype.globalLogError=function(e){window.console&&window.console.error?window.console.error(e):this.globalLogWarn(e)},e.prototype.log=function(s){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];var i=S.apply(this,arguments);if(xe.log)xe.log(i);else if(xe.logToConsole){var r=s.bind(this);r(i)}},e}()),D={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/authenticating_users"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"}}},z={buildLogSuffix:function(o){var t,r=D.urls[o];return r?(r.fullUrl?t=r.fullUrl:r.path&&(t=D.baseUrl+r.path),t?"See: "+t:""):""}},H=function(s,t,a){var n,e=this;for(var o in(n=be.createXHR()).open("POST",e.options.authEndpoint,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),this.authOptions.headers)n.setRequestHeader(o,this.authOptions.headers[o]);return n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var o,r=!1;try{o=JSON.parse(n.responseText),r=!0}catch(e){a(!0,"JSON returned from auth endpoint was invalid, yet status code was 200. Data was: "+n.responseText)}r&&a(!1,o)}else{var s=z.buildLogSuffix("authenticationEndpoint");O.error("Unable to retrieve auth string from auth endpoint - received status "+n.status+" from "+e.options.authEndpoint+". Clients must be authenticated to join private or presence channels. "+s),a(!0,n.status)}},n.send(this.composeQuery(t)),n},q=function(s,t,e){void 0!==this.authOptions.headers&&O.warn("To send headers with the auth request, you must use AJAX, rather than JSONP.");var n=s.nextAuthCallbackID.toString();s.nextAuthCallbackID++;var r=s.getDocument(),o=r.createElement("script");s.auth_callbacks[n]=function(o){e(!1,o)};o.src=this.options.authEndpoint+"?callback="+encodeURIComponent("Pusher.auth_callbacks['"+n+"']")+"&"+this.composeQuery(t);var i=r.getElementsByTagName("head")[0]||r.documentElement;i.insertBefore(o,i.firstChild)},F=function(){function e(e){this.src=e}return e.prototype.send=function(o){var t=this,e="Error loading "+t.src;t.script=document.createElement("script"),t.script.id=o.id,t.script.src=t.src,t.script.type="text/javascript",t.script.charset="UTF-8",t.script.addEventListener?(t.script.onerror=function(){o.callback(e)},t.script.onload=function(){o.callback(null)}):t.script.onreadystatechange=function(){"loaded"!==t.script.readyState&&"complete"!==t.script.readyState||o.callback(null)},void 0===t.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement("script"),t.errorScript.id=o.id+"_error",t.errorScript.text=o.name+"('"+e+"');",t.script.async=t.errorScript.async=!1):t.script.async=!0;var n=document.getElementsByTagName("head")[0];n.insertBefore(t.script,n.firstChild),t.errorScript&&n.insertBefore(t.errorScript,t.script.nextSibling)},e.prototype.cleanup=function(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null},e}(),X=function(){function e(o,t){this.url=o,this.data=t}return e.prototype.send=function(o){if(!this.request){var t=I(this.data),e=this.url+"/"+o.number+"?"+t;this.request=be.createScriptRequest(e),this.request.send(o)}},e.prototype.cleanup=function(){this.request&&this.request.cleanup()},e}(),J=function(){function e(){this._callbacks={}}return e.prototype.get=function(e){return this._callbacks[U(e)]},e.prototype.add=function(o,t,e){var n=U(o);this._callbacks[n]=this._callbacks[n]||[],this._callbacks[n].push({fn:t,context:e})},e.prototype.remove=function(o,t,e){if(o||t||e){var n=o?[U(o)]:P(this._callbacks);t||e?this.removeCallback(n,t,e):this.removeAllCallbacks(n)}else this._callbacks={}},e.prototype.removeCallback=function(o,r,e){x(o,function(o){this._callbacks[o]=R(this._callbacks[o]||[],function(o){return r&&r!==o.fn||e&&e!==o.context}),0===this._callbacks[o].length&&delete this._callbacks[o]},this)},e.prototype.removeAllCallbacks=function(e){x(e,function(e){delete this._callbacks[e]},this)},e}(),Q=function(){function e(e){this.callbacks=new J,this.global_callbacks=[],this.failThrough=e}return e.prototype.bind=function(o,t,e){return this.callbacks.add(o,t,e),this},e.prototype.bind_global=function(e){return this.global_callbacks.push(e),this},e.prototype.unbind=function(o,t,e){return this.callbacks.remove(o,t,e),this},e.prototype.unbind_global=function(o){return o?(this.global_callbacks=R(this.global_callbacks||[],function(t){return t!==o}),this):(this.global_callbacks=[],this)},e.prototype.unbind_all=function(){return this.unbind(),this.unbind_global(),this},e.prototype.emit=function(s,t,e){for(var n=0;n<this.global_callbacks.length;n++)this.global_callbacks[n](s,t);var a=this.callbacks.get(s),o=[];if(e?o.push(t,e):t&&o.push(t),a&&0<a.length)for(n=0;n<a.length;n++)a[n].fn.apply(a[n].context||window,o);else this.failThrough&&this.failThrough(s,t);return this},e}(),Re=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e])})(t,e)};return function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ie=function(a){function t(t,e,n,r,o){var i=a.call(this)||this;return i.initialize=be.transportConnectionInitializer,i.hooks=t,i.name=e,i.priority=n,i.key=r,i.options=o,i.state="new",i.timeline=o.timeline,i.activityTimeout=o.activityTimeout,i.id=i.timeline.generateUniqueID(),i}return Re(t,a),t.prototype.handlesActivityChecks=function(){return!!this.hooks.handlesActivityChecks},t.prototype.supportsPing=function(){return!!this.hooks.supportsPing},t.prototype.connect=function(){var o=this;if(this.socket||"initialized"!==this.state)return!1;var t=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(t,this.options)}catch(t){return T.defer(function(){o.onError(t),o.changeState("closed")}),!1}return this.bindListeners(),O.debug("Connecting",{transport:this.name,url:t}),this.changeState("connecting"),!0},t.prototype.close=function(){return!!this.socket&&(this.socket.close(),!0)},t.prototype.send=function(o){var t=this;return"open"===this.state&&(T.defer(function(){t.socket&&t.socket.send(o)}),!0)},t.prototype.ping=function(){"open"===this.state&&this.supportsPing()&&this.socket.ping()},t.prototype.onOpen=function(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0},t.prototype.onError=function(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))},t.prototype.onClose=function(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0},t.prototype.onMessage=function(e){this.emit("message",e)},t.prototype.onActivity=function(){this.emit("activity")},t.prototype.bindListeners=function(){var o=this;this.socket.onopen=function(){o.onOpen()},this.socket.onerror=function(t){o.onError(t)},this.socket.onclose=function(t){o.onClose(t)},this.socket.onmessage=function(t){o.onMessage(t)},this.supportsPing()&&(this.socket.onactivity=function(){o.onActivity()})},t.prototype.unbindListeners=function(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))},t.prototype.changeState=function(o,t){this.state=o,this.timeline.info(this.buildTimelineMessage({state:o,params:t})),this.emit(o,t)},t.prototype.buildTimelineMessage=function(e){return V({cid:this.id},e)},t}(Q),Ne=function(){function e(e){this.hooks=e}return e.prototype.isSupported=function(e){return this.hooks.isSupported(e)},e.prototype.createConnection=function(o,t,e,n){return new Ie(this.hooks,o,t,e,n)},e}(),De=new Ne({urls:{getInitial:function(o,t){return B("ws",t,(t.httpPath||"")+M(o,"flash=false"))}},handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!be.getWebSocketAPI()},isSupported:function(){return!!be.getWebSocketAPI()},getSocket:function(e){return be.createWebSocket(e)}}),je={urls:{getInitial:function(o,t){return B("http",t,(t.httpPath||"/pusher")+M(o))}},handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},Be=V({getSocket:function(e){return be.HTTPFactory.createStreamingSocket(e)}},je),Me=V({getSocket:function(e){return be.HTTPFactory.createPollingSocket(e)}},je),ze={isSupported:function(){return be.isXHRSupported()}},He={ws:De,xhr_streaming:new Ne(V({},Be,ze)),xhr_polling:new Ne(V({},Me,ze))},qe=new Ne({file:"sockjs",urls:{getInitial:function(o,t){return B("http",t,t.httpPath||"/pusher")},getPath:function(e){return M(e)}},handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(o,t){return new window.SockJS(o,null,{js_path:s.getPath("sockjs",{useTLS:t.useTLS}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(o,t){o.send(JSON.stringify({path:t}))}}),Fe={isSupported:function(e){return be.isXDRSupported(e.useTLS)}},Ue=new Ne(V({},Be,Fe)),Xe=new Ne(V({},Me,Fe));He.xdr_streaming=Ue,He.xdr_polling=Xe,He.sockjs=qe;var Ye,Ke=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e])})(t,e)};return function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),We=new(function(o){function t(){var t=o.call(this)||this,e=t;return void 0!==window.addEventListener&&(window.addEventListener("online",function(){e.emit("online")},!1),window.addEventListener("offline",function(){e.emit("offline")},!1)),t}return Ke(t,o),t.prototype.isOnline=function(){return void 0===window.navigator.onLine||window.navigator.onLine},t}(Q)),Ge=function(){function e(o,t,e){this.manager=o,this.transport=t,this.minPingDelay=e.minPingDelay,this.maxPingDelay=e.maxPingDelay,this.pingDelay=void 0}return e.prototype.createConnection=function(p,t,e,n){var l=this;n=V({},n,{activityTimeout:this.pingDelay});var o=this.transport.createConnection(p,t,e,n),i=null,d=function(){o.unbind("open",d),o.bind("closed",c),i=T.now()},c=function(n){if(o.unbind("closed",c),1002===n.code||1003===n.code)l.manager.reportDeath();else if(!n.wasClean&&i){var t=T.now()-i;t<2*l.maxPingDelay&&(l.manager.reportDeath(),l.pingDelay=Math.max(t/2,l.minPingDelay))}};return o.bind("open",d),o},e.prototype.isSupported=function(e){return this.manager.isAlive()&&this.transport.isSupported(e)},e}(),Je={decodeMessage:function(o){try{var t=JSON.parse(o.data),e=t.data;if("string"==typeof e)try{e=JSON.parse(t.data)}catch(e){}var s={event:t.event,channel:t.channel,data:e};return t.user_id&&(s.user_id=t.user_id),s}catch(t){throw{type:"MessageParseError",error:t,data:o.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(o){var t=Je.decodeMessage(o);if("pusher:connection_established"===t.event){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:1e3*t.data.activity_timeout}}if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},getCloseAction:function(e){return 4e3>e.code?1002<=e.code&&1004>=e.code?"backoff":null:4e3===e.code?"tls_only":4100>e.code?"refused":4200>e.code?"backoff":4300>e.code?"retry":"refused"},getCloseError:function(e){return 1e3!==e.code&&1001!==e.code?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}},Ve=Je,Qe=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e])})(t,e)};return function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),Ze=function(o){function t(t,e){var n=o.call(this)||this;return n.id=t,n.transport=e,n.activityTimeout=e.activityTimeout,n.bindListeners(),n}return Qe(t,o),t.prototype.handlesActivityChecks=function(){return this.transport.handlesActivityChecks()},t.prototype.send=function(e){return this.transport.send(e)},t.prototype.send_event=function(o,t,e){var n={event:o,data:t};return e&&(n.channel=e),O.debug("Event sent",n),this.send(Ve.encodeMessage(n))},t.prototype.ping=function(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})},t.prototype.close=function(){this.transport.close()},t.prototype.bindListeners=function(){var o=this,t={message:function(t){var e;try{e=Ve.decodeMessage(t)}catch(e){o.emit("error",{type:"MessageParseError",error:e,data:t.data})}if(void 0!==e){switch(O.debug("Event recd",e),e.event){case"pusher:error":o.emit("error",{type:"PusherError",data:e.data});break;case"pusher:ping":o.emit("ping");break;case"pusher:pong":o.emit("pong");}o.emit("message",e)}},activity:function(){o.emit("activity")},error:function(t){o.emit("error",{type:"WebSocketError",error:t})},closed:function(t){r(),t&&t.code&&o.handleCloseEvent(t),o.transport=null,o.emit("closed")}},r=function(){E(t,function(t,e){o.transport.unbind(e,t)})};E(t,function(t,e){o.transport.bind(e,t)})},t.prototype.handleCloseEvent=function(o){var t=Ve.getCloseAction(o),e=Ve.getCloseError(o);e&&this.emit("error",e),t&&this.emit(t,{action:t,error:e})},t}(Q),$e=function(){function e(o,t){this.transport=o,this.callback=t,this.bindListeners()}return e.prototype.close=function(){this.unbindListeners(),this.transport.close()},e.prototype.bindListeners=function(){var o=this;this.onMessage=function(t){var e;o.unbindListeners();try{e=Ve.processHandshake(t)}catch(t){return o.finish("error",{error:t}),void o.transport.close()}"connected"===e.action?o.finish("connected",{connection:new Ze(e.id,o.transport),activityTimeout:e.activityTimeout}):(o.finish(e.action,{error:e.error}),o.transport.close())},this.onClosed=function(t){o.unbindListeners();var e=Ve.getCloseAction(t)||"backoff",n=Ve.getCloseError(t);o.finish(e,{error:n})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)},e.prototype.unbindListeners=function(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)},e.prototype.finish=function(o,t){this.callback(V({transport:this.transport,action:o},t))},e}(),et=function(){function o(o,t){this.channel=o;var e=t.authTransport;if(void 0===be.getAuthorizers()[e])throw"'"+e+"' is not a recognized auth transport";this.type=e,this.options=t,this.authOptions=(t||{}).auth||{}}return o.prototype.composeQuery=function(o){var t="socket_id="+encodeURIComponent(o)+"&channel_name="+encodeURIComponent(this.channel.name);for(var r in this.authOptions.params)t+="&"+encodeURIComponent(r)+"="+encodeURIComponent(this.authOptions.params[r]);return t},o.prototype.authorize=function(t,e){return o.authorizers=o.authorizers||be.getAuthorizers(),o.authorizers[this.type].call(this,be,t,e)},o}(),tt=function(){function e(o,t){this.timeline=o,this.options=t||{}}return e.prototype.send=function(o,t){this.timeline.isEmpty()||this.timeline.send(be.TimelineTransport.getAgent(this,o),t)},e}(),ot=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e])})(t,e)};return function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),nt=function(o){function t(t){var e=this.constructor,n=o.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}return ot(t,o),t}(Error),rt=function(o){function t(t){var e=this.constructor,n=o.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}return ot(t,o),t}(Error),st=function(o){function t(t){var e=this.constructor,n=o.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}return ot(t,o),t}(Error),it=function(o){function t(t){var e=this.constructor,n=o.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}return ot(t,o),t}(Error),at=function(o){function t(t){var e=this.constructor,n=o.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}return ot(t,o),t}(Error),ct=function(o){function t(t){var e=this.constructor,n=o.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}return ot(t,o),t}(Error),pt=function(o){function t(t){var e=this.constructor,n=o.call(this,t)||this;return Object.setPrototypeOf(n,e.prototype),n}return ot(t,o),t}(Error),lt=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e])})(t,e)};return function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),dt=function(o){function t(s,e){var t=o.call(this,function(e){O.debug("No callbacks on "+s+" for "+e)})||this;return t.name=s,t.pusher=e,t.subscribed=!1,t.subscriptionPending=!1,t.subscriptionCancelled=!1,t}return lt(t,o),t.prototype.authorize=function(o,t){return t(!1,{})},t.prototype.trigger=function(o,t){if(0!==o.indexOf("client-"))throw new nt("Event '"+o+"' does not start with 'client-'");if(!this.subscribed){var e=z.buildLogSuffix("triggeringClientEvents");O.warn("Client event triggered before channel 'subscription_succeeded' event . "+e)}return this.pusher.send_event(o,t,this.name)},t.prototype.disconnect=function(){this.subscribed=!1,this.subscriptionPending=!1},t.prototype.handleEvent=function(o){var t=o.event,e=o.data;"pusher_internal:subscription_succeeded"===t?this.handleSubscriptionSucceededEvent(o):0!==t.indexOf("pusher_internal:")&&this.emit(t,e,{})},t.prototype.handleSubscriptionSucceededEvent=function(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",e.data)},t.prototype.subscribe=function(){var o=this;this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,function(t,e){t?(O.error(e),o.emit("pusher:subscription_error",e)):o.pusher.send_event("pusher:subscribe",{auth:e.auth,channel_data:e.channel_data,channel:o.name})}))},t.prototype.unsubscribe=function(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})},t.prototype.cancelSubscription=function(){this.subscriptionCancelled=!0},t.prototype.reinstateSubscription=function(){this.subscriptionCancelled=!1},t}(Q),ut=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e])})(t,e)};return function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),ht=function(o){function t(){return null!==o&&o.apply(this,arguments)||this}return ut(t,o),t.prototype.authorize=function(o,t){return Ct.createAuthorizer(this,this.pusher.config).authorize(o,t)},t}(dt),yt=function(){function e(){this.reset()}return e.prototype.get=function(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null},e.prototype.each=function(o){var t=this;E(this.members,function(e,n){o(t.get(n))})},e.prototype.setMyID=function(e){this.myID=e},e.prototype.onSubscription=function(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)},e.prototype.addMember=function(e){return null===this.get(e.user_id)&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)},e.prototype.removeMember=function(o){var t=this.get(o.user_id);return t&&(delete this.members[o.user_id],this.count--),t},e.prototype.reset=function(){this.members={},this.count=0,this.myID=null,this.me=null},e}(),gt=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e])})(t,e)};return function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),bt=function(o){function t(t,e){var n=o.call(this,t,e)||this;return n.members=new yt,n}return gt(t,o),t.prototype.authorize=function(t,s){var n=this;o.prototype.authorize.call(this,t,function(r,t){if(!r){if(void 0===t.channel_data){var e=z.buildLogSuffix("authenticationEndpoint");return O.error("Invalid auth response for channel '"+n.name+"',expected 'channel_data' field. "+e),void s("Invalid auth response")}var o=JSON.parse(t.channel_data);n.members.setMyID(o.user_id)}s(r,t)})},t.prototype.handleEvent=function(o){var t=o.event;if(0===t.indexOf("pusher_internal:"))this.handleInternalEvent(o);else{var e=o.data,n={};o.user_id&&(n.user_id=o.user_id),this.emit(t,e,n)}},t.prototype.handleInternalEvent=function(s){var t=s.event,e=s.data;switch(t){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(s);break;case"pusher_internal:member_added":var n=this.members.addMember(e);this.emit("pusher:member_added",n);break;case"pusher_internal:member_removed":var r=this.members.removeMember(e);r&&this.emit("pusher:member_removed",r);}},t.prototype.handleSubscriptionSucceededEvent=function(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(e.data),this.emit("pusher:subscription_succeeded",this.members))},t.prototype.disconnect=function(){this.members.reset(),o.prototype.disconnect.call(this)},t}(ht),mt=e(0),_t=e(1),ft=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e])})(t,e)};return function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),kt=function(o){function t(){var t=null!==o&&o.apply(this,arguments)||this;return t.key=null,t}return ft(t,o),t.prototype.authorize=function(t,s){var n=this;o.prototype.authorize.call(this,t,function(r,t){if(r)s(!0,t);else{var e=t.shared_secret;if(e)n.key=Object(_t.decodeBase64)(e),delete t.shared_secret,s(!1,t);else{var o="No shared_secret key in auth payload for encrypted channel: "+n.name;s(!0,o)}}})},t.prototype.trigger=function(){throw new at("Client events are not currently supported for encrypted channels")},t.prototype.handleEvent=function(t){var e=t.event,n=t.data;0!==e.indexOf("pusher_internal:")&&0!==e.indexOf("pusher:")?this.handleEncryptedEvent(e,n):o.prototype.handleEvent.call(this,t)},t.prototype.handleEncryptedEvent=function(a,t){var c=this;if(!this.key)O.debug("Received encrypted event before key has been retrieved from the authEndpoint");else if(t.ciphertext&&t.nonce){var n=Object(_t.decodeBase64)(t.ciphertext);if(n.length<mt.secretbox.overheadLength)O.error("Expected encrypted event ciphertext length to be "+mt.secretbox.overheadLength+", got: "+n.length);else{var r=Object(_t.decodeBase64)(t.nonce);if(r.length<mt.secretbox.nonceLength)O.error("Expected encrypted event nonce length to be "+mt.secretbox.nonceLength+", got: "+r.length);else{var o=mt.secretbox.open(n,r,this.key);if(null===o)return O.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,function(t,e){t?O.error("Failed to make a request to the authEndpoint: "+e+". Unable to fetch new key, so dropping encrypted event"):null===(o=mt.secretbox.open(n,r,c.key))?O.error("Failed to decrypt event with new key. Dropping encrypted event"):c.emitJSON(a,Object(_t.encodeUTF8)(o))});this.emitJSON(a,Object(_t.encodeUTF8)(o))}}}else O.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+t)},t.prototype.emitJSON=function(o,t){try{this.emit(o,JSON.parse(t))}catch(e){this.emit(o,t)}return this},t}(ht),vt=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e])})(t,e)};return function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),St=function(s){function t(t,e){var n=s.call(this)||this;n.key=t,n.options=e||{},n.state="initialized",n.connection=null,n.usingTLS=!!e.useTLS,n.timeline=n.options.timeline,n.errorCallbacks=n.buildErrorCallbacks(),n.connectionCallbacks=n.buildConnectionCallbacks(n.errorCallbacks),n.handshakeCallbacks=n.buildHandshakeCallbacks(n.errorCallbacks);var r=be.getNetwork();return r.bind("online",function(){n.timeline.info({netinfo:"online"}),"connecting"!==n.state&&"unavailable"!==n.state||n.retryIn(0)}),r.bind("offline",function(){n.timeline.info({netinfo:"offline"}),n.connection&&n.sendActivityCheck()}),n.updateStrategy(),n}return vt(t,s),t.prototype.connect=function(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))},t.prototype.send=function(e){return!!this.connection&&this.connection.send(e)},t.prototype.send_event=function(o,t,e){return!!this.connection&&this.connection.send_event(o,t,e)},t.prototype.disconnect=function(){this.disconnectInternally(),this.updateState("disconnected")},t.prototype.isUsingTLS=function(){return this.usingTLS},t.prototype.startConnecting=function(){var o=this,t=function(e,n){e?o.runner=o.strategy.connect(0,t):"error"===n.action?(o.emit("error",{type:"HandshakeError",error:n.error}),o.timeline.error({handshakeError:n.error})):(o.abortConnecting(),o.handshakeCallbacks[n.action](n))};this.runner=this.strategy.connect(0,t)},t.prototype.abortConnecting=function(){this.runner&&(this.runner.abort(),this.runner=null)},t.prototype.disconnectInternally=function(){(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection)&&this.abandonConnection().close()},t.prototype.updateStrategy=function(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})},t.prototype.retryIn=function(o){var t=this;this.timeline.info({action:"retry",delay:o}),0<o&&this.emit("connecting_in",Math.round(o/1e3)),this.retryTimer=new w(o||0,function(){t.disconnectInternally(),t.connect()})},t.prototype.clearRetryTimer=function(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)},t.prototype.setUnavailableTimer=function(){var e=this;this.unavailableTimer=new w(this.options.unavailableTimeout,function(){e.updateState("unavailable")})},t.prototype.clearUnavailableTimer=function(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()},t.prototype.sendActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new w(this.options.pongTimeout,function(){e.timeline.error({pong_timed_out:e.options.pongTimeout}),e.retryIn(0)})},t.prototype.resetActivityCheck=function(){var e=this;this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new w(this.activityTimeout,function(){e.sendActivityCheck()}))},t.prototype.stopActivityCheck=function(){this.activityTimer&&this.activityTimer.ensureAborted()},t.prototype.buildConnectionCallbacks=function(o){var n=this;return V({},o,{message:function(e){n.resetActivityCheck(),n.emit("message",e)},ping:function(){n.send_event("pusher:pong",{})},activity:function(){n.resetActivityCheck()},error:function(e){n.emit("error",{type:"WebSocketError",error:e})},closed:function(){n.abandonConnection(),n.shouldRetry()&&n.retryIn(1e3)}})},t.prototype.buildHandshakeCallbacks=function(o){var n=this;return V({},o,{connected:function(e){n.activityTimeout=Math.min(n.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||1/0),n.clearUnavailableTimer(),n.setConnection(e.connection),n.socket_id=n.connection.id,n.updateState("connected",{socket_id:n.socket_id})}})},t.prototype.buildErrorCallbacks=function(){var o=this,t=function(t){return function(e){e.error&&o.emit("error",{type:"WebSocketError",error:e.error}),t(e)}};return{tls_only:t(function(){o.usingTLS=!0,o.updateStrategy(),o.retryIn(0)}),refused:t(function(){o.disconnect()}),backoff:t(function(){o.retryIn(1e3)}),retry:t(function(){o.retryIn(0)})}},t.prototype.setConnection=function(o){for(var t in this.connection=o,this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()},t.prototype.abandonConnection=function(){if(this.connection){for(var o in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(o,this.connectionCallbacks[o]);var t=this.connection;return this.connection=null,t}},t.prototype.updateState=function(o,t){var e=this.state;if(this.state=o,e!==o){var n=o;"connected"===n&&(n+=" with new socket ID "+t.socket_id),O.debug("State changed",e+" -> "+n),this.timeline.info({state:o,params:t}),this.emit("state_change",{previous:e,current:o}),this.emit(o,t)}},t.prototype.shouldRetry=function(){return"connecting"===this.state||"connected"===this.state},t}(Q),Tt=function(){function e(){this.channels={}}return e.prototype.add=function(o,t){return this.channels[o]||(this.channels[o]=function(o,t){return 0===o.indexOf("private-encrypted-")?Ct.createEncryptedChannel(o,t):0===o.indexOf("private-")?Ct.createPrivateChannel(o,t):0===o.indexOf("presence-")?Ct.createPresenceChannel(o,t):Ct.createChannel(o,t)}(o,t)),this.channels[o]},e.prototype.all=function(){return function(o){var n=[];return E(o,function(e){n.push(e)}),n}(this.channels)},e.prototype.find=function(e){return this.channels[e]},e.prototype.remove=function(o){var t=this.channels[o];return delete this.channels[o],t},e.prototype.disconnect=function(){E(this.channels,function(e){e.disconnect()})},e}(),Ct={createChannels:function(){return new Tt},createConnectionManager:function(o,t){return new St(o,t)},createChannel:function(o,t){return new dt(o,t)},createPrivateChannel:function(o,t){return new ht(o,t)},createPresenceChannel:function(o,t){return new bt(o,t)},createEncryptedChannel:function(o,t){return new kt(o,t)},createTimelineSender:function(o,t){return new tt(o,t)},createAuthorizer:function(o,t){return t.authorizer?t.authorizer(o,t):new et(o,t)},createHandshake:function(o,t){return new $e(o,t)},createAssistantToTheTransportManager:function(o,t,e){return new Ge(o,t,e)}},Pt=function(){function e(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}return e.prototype.getAssistant=function(e){return Ct.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})},e.prototype.isAlive=function(){return 0<this.livesLeft},e.prototype.reportDeath=function(){this.livesLeft-=1},e}(),xt=function(){function e(o,t){this.strategies=o,this.loop=!!t.loop,this.failFast=!!t.failFast,this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}return e.prototype.isSupported=function(){return n(this.strategies,T.method("isSupported"))},e.prototype.connect=function(p,l){var e=this,n=this.strategies,r=0,d=this.timeout,h=null,y=function(t,o){o?l(null,o):(r+=1,e.loop&&(r%=n.length),r<n.length?(d&&(d*=2,e.timeoutLimit&&(d=Math.min(d,e.timeoutLimit))),h=e.tryStrategy(n[r],p,{timeout:d,failFast:e.failFast},y)):l(!0))};return h=this.tryStrategy(n[r],p,{timeout:d,failFast:this.failFast},y),{abort:function(){h.abort()},forceMinPriority:function(t){p=t,h&&h.forceMinPriority(t)}}},e.prototype.tryStrategy=function(s,t,a,n){var r=null,e=null;return 0<a.timeout&&(r=new w(a.timeout,function(){e.abort(),n(!0)})),e=s.connect(t,function(o,t){o&&r&&r.isRunning()&&!a.failFast||(r&&r.ensureAborted(),n(o,t))}),{abort:function(){r&&r.ensureAborted(),e.abort()},forceMinPriority:function(o){e.forceMinPriority(o)}}},e}(),Et=function(){function e(e){this.strategies=e}return e.prototype.isSupported=function(){return n(this.strategies,T.method("isSupported"))},e.prototype.connect=function(o,s){return function(o,s,e){var n=L(o,function(n,t,r,o){return n.connect(s,e(t,o))});return{abort:function(){x(n,K)},forceMinPriority:function(o){x(n,function(t){t.forceMinPriority(o)})}}}(this.strategies,o,function(e,t){return function(n,r){t[e].error=n,n?function(e){return function(o,t){for(var e=0;e<o.length;e++)if(!t(o[e],e,o))return!1;return!0}(e,function(e){return!!e.error})}(t)&&s(!0):(x(t,function(e){e.forceMinPriority(r.transport.priority)}),s(null,r))}})},e}(),Ot=function(){function e(o,t,e){this.strategy=o,this.transports=t,this.ttl=e.ttl||18e5,this.usingTLS=e.useTLS,this.timeline=e.timeline}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(p,l){var e=this.usingTLS,n=function(o){var t=be.getLocalStorage();if(t)try{var e=t[W(o)];if(e)return JSON.parse(e)}catch(t){Z(o)}return null}(e),d=[this.strategy];if(n&&n.timestamp+this.ttl>=T.now()){var o=this.transports[n.transport];o&&(this.timeline.info({cached:!0,transport:n.transport,latency:n.latency}),d.push(new xt([o],{timeout:2*n.latency+1e3,failFast:!0})))}var u=T.now(),h=d.pop().connect(p,function t(o,n){o?(Z(e),0<d.length?(u=T.now(),h=d.pop().connect(p,t)):l(o)):(!function(o,t,e){var n=be.getLocalStorage();if(n)try{n[W(o)]=N({timestamp:T.now(),transport:t,latency:e})}catch(e){}}(e,n.transport.name,T.now()-u),l(null,n))});return{abort:function(){h.abort()},forceMinPriority:function(t){p=t,h&&h.forceMinPriority(t)}}},e}(),wt=function(){function e(o,t){var e=t.delay;this.strategy=o,this.options={delay:e}}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(s,i){var a,e=this.strategy,r=new w(this.options.delay,function(){a=e.connect(s,i)});return{abort:function(){r.ensureAborted(),a&&a.abort()},forceMinPriority:function(t){s=t,a&&a.forceMinPriority(t)}}},e}(),ee=function(){function e(o,t,e){this.test=o,this.trueBranch=t,this.falseBranch=e}return e.prototype.isSupported=function(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()},e.prototype.connect=function(o,t){return(this.test()?this.trueBranch:this.falseBranch).connect(o,t)},e}(),ne=function(){function e(e){this.strategy=e}return e.prototype.isSupported=function(){return this.strategy.isSupported()},e.prototype.connect=function(o,s){var e=this.strategy.connect(o,function(o,t){t&&e.abort(),s(o,t)});return e},e}(),re=function(C,t){function e(e,n,o,r,s){var i=t(C,e,n,o,r,s);return P[e]=i,i}var r,P={},n={hostNonTLS:C.wsHost+":"+C.wsPort,hostTLS:C.wsHost+":"+C.wssPort,httpPath:C.wsPath},i=V({},n,{useTLS:!0}),s={hostNonTLS:C.httpHost+":"+C.httpPort,hostTLS:C.httpHost+":"+C.httpsPort,httpPath:C.httpPath},c={loop:!0,timeout:15e3,timeoutLimit:6e4},a=new Pt({lives:2,minPingDelay:1e4,maxPingDelay:C.activity_timeout}),u=new Pt({lives:2,minPingDelay:1e4,maxPingDelay:C.activity_timeout}),h=e("ws","ws",3,n,a),p=e("wss","ws",3,i,a),f=e("sockjs","sockjs",1,s),l=e("xhr_streaming","xhr_streaming",1,s,u),d=e("xdr_streaming","xdr_streaming",1,s,u),y=e("xhr_polling","xhr_polling",1,s),v=e("xdr_polling","xdr_polling",1,s),g=new xt([h],c),b=new xt([p],c),m=new xt([f],c),x=new xt([new ee($(l),l,d)],c),_=new xt([new ee($(y),y,v)],c),S=new xt([new ee($(x),new Et([x,new wt(_,{delay:4e3})]),_)],c),k=new ee($(S),S,m);return r=C.useTLS?new Et([g,new wt(k,{delay:2e3})]):new Et([g,new wt(b,{delay:2e3}),new wt(k,{delay:5e3})]),new Ot(new ne(new ee($(h),r,k)),P,{ttl:18e5,timeline:C.timeline,useTLS:C.useTLS})},se={getRequest:function(o){var t=new window.XDomainRequest;return t.ontimeout=function(){o.emit("error",new rt),o.close()},t.onerror=function(t){o.emit("error",t),o.close()},t.onprogress=function(){t.responseText&&0<t.responseText.length&&o.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&0<t.responseText.length&&o.onChunk(200,t.responseText),o.emit("finished",200),o.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}},ce=function(){var o=function(t,e){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,t){o.__proto__=t}||function(o,t){for(var e in t)t.hasOwnProperty(e)&&(o[e]=t[e])})(t,e)};return function(t,e){function n(){this.constructor=t}o(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}}(),ae=function(s){function t(t,e,n){var r=s.call(this)||this;return r.hooks=t,r.method=e,r.url=n,r}return ce(t,s),t.prototype.start=function(o){var t=this;this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=function(){t.close()},be.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(o)},t.prototype.close=function(){this.unloader&&(be.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)},t.prototype.onChunk=function(o,t){for(;;){var e=this.advanceBuffer(t);if(!e)break;this.emit("chunk",{status:o,data:e})}this.isBufferTooLong(t)&&this.emit("buffer_too_long")},t.prototype.advanceBuffer=function(o){var t=o.slice(this.position),e=t.indexOf("\n");return-1===e?null:(this.position+=e+1,t.slice(0,e))},t.prototype.isBufferTooLong=function(e){return this.position===e.length&&262144<e.length},t}(Q);!function(e){e[e.CONNECTING=0]="CONNECTING",e[e.OPEN=1]="OPEN",e[e.CLOSED=3]="CLOSED"}(Ye||(Ye={}));var ue,Lt=Ye,he=1,Rt=function(){function e(o,t){this.hooks=o,this.session=oe(1e3)+"/"+function(o){for(var t=[],e=0;e<o;e++)t.push(oe(32).toString(32));return t.join("")}(8),this.location=function(o){var t=/([^\?]*)\/*(\??.*)/.exec(o);return{base:t[1],queryString:t[2]}}(t),this.readyState=Lt.CONNECTING,this.openStream()}return e.prototype.send=function(e){return this.sendRaw(JSON.stringify([e]))},e.prototype.ping=function(){this.hooks.sendHeartbeat(this)},e.prototype.close=function(o,t){this.onClose(o,t,!0)},e.prototype.sendRaw=function(o){if(this.readyState!==Lt.OPEN)return!1;try{return be.createSocketRequest("POST",te((t=this.location,r=this.session,t.base+"/"+r+"/xhr_send"))).start(o),!0}catch(e){return!1}var t,r},e.prototype.reconnect=function(){this.closeStream(),this.openStream()},e.prototype.onClose=function(o,t,e){this.closeStream(),this.readyState=Lt.CLOSED,this.onclose&&this.onclose({code:o,reason:t,wasClean:e})},e.prototype.onChunk=function(o){var t;if(200===o.status)switch(this.readyState===Lt.OPEN&&this.onActivity(),o.data.slice(0,1)){case"o":t=JSON.parse(o.data.slice(1)||"{}"),this.onOpen(t);break;case"a":t=JSON.parse(o.data.slice(1)||"[]");for(var r=0;r<t.length;r++)this.onEvent(t[r]);break;case"m":t=JSON.parse(o.data.slice(1)||"null"),this.onEvent(t);break;case"h":this.hooks.onHeartbeat(this);break;case"c":t=JSON.parse(o.data.slice(1)||"[]"),this.onClose(t[0],t[1],!0);}},e.prototype.onOpen=function(o){var t,s,i;this.readyState===Lt.CONNECTING?(o&&o.hostname&&(this.location.base=(t=this.location.base,s=o.hostname,(i=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t))[1]+s+i[3])),this.readyState=Lt.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)},e.prototype.onEvent=function(e){this.readyState===Lt.OPEN&&this.onmessage&&this.onmessage({data:e})},e.prototype.onActivity=function(){this.onactivity&&this.onactivity()},e.prototype.onError=function(e){this.onerror&&this.onerror(e)},e.prototype.openStream=function(){var o=this;this.stream=be.createSocketRequest("POST",te(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",function(t){o.onChunk(t)}),this.stream.bind("finished",function(t){o.hooks.onFinished(o,t)}),this.stream.bind("buffer_too_long",function(){o.reconnect()});try{this.stream.start()}catch(t){T.defer(function(){o.onError(t),o.onClose(1006,"Could not start streaming",!1)})}},e.prototype.closeStream=function(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)},e}(),ye={getReceiveURL:function(o,t){return o.base+"/"+t+"/xhr_streaming"+o.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(o,t){o.onClose(1006,"Connection interrupted ("+t+")",!1)}},ve={getReceiveURL:function(o,t){return o.base+"/"+t+"/xhr"+o.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(o,t){200===t?o.reconnect():o.onClose(1006,"Connection interrupted ("+t+")",!1)}},ge={getRequest:function(o){var t=new(be.getXHRAPI());return t.onreadystatechange=t.onprogress=function(){switch(t.readyState){case 3:t.responseText&&0<t.responseText.length&&o.onChunk(t.status,t.responseText);break;case 4:t.responseText&&0<t.responseText.length&&o.onChunk(t.status,t.responseText),o.emit("finished",t.status),o.close();}},t},abortRequest:function(e){e.onreadystatechange=null,e.abort()}},be={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:fe,DependenciesReceivers:r,getDefaultStrategy:re,Transports:He,transportConnectionInitializer:function(){var o=this;o.timeline.info(o.buildTimelineMessage({transport:o.name+(o.options.useTLS?"":"")})),o.hooks.isInitialized()?o.changeState("initialized"):o.hooks.file?(o.changeState("initializing"),s.load(o.hooks.file,{useTLS:o.options.useTLS},function(t,e){o.hooks.isInitialized()?(o.changeState("initialized"),e(!0)):(t&&o.onError(t),o.onClose(),e(!1))})):o.onClose()},HTTPFactory:{createStreamingSocket:function(e){return this.createSocket(ye,e)},createPollingSocket:function(e){return this.createSocket(ve,e)},createSocket:function(o,t){return new Rt(o,t)},createXHR:function(o,t){return this.createRequest(ge,o,t)},createRequest:function(o,t,e){return new ae(o,t,e)},createXDR:function(o,t){return this.createRequest(se,o,t)}},TimelineTransport:{name:"jsonp",getAgent:function(o,t){return function(e,a){var n="http"+(t?"":"")+"://"+(o.host||o.options.host)+o.options.path,r=be.createJSONPRequest(n,e),s=be.ScriptReceivers.create(function(t,e){fe.remove(s),r.cleanup(),e&&e.host&&(o.host=e.host),a&&a(t,e)});r.send(s)}}},getXHRAPI:function(){return window.XMLHttpRequest},getWebSocketAPI:function(){return window.WebSocket||window.MozWebSocket},setup:function(o){var t=this;window.Pusher=o;var e=function(){t.onDocumentBody(o.ready)};window.JSON?e():s.load("json2",{},e)},getDocument:function(){return document},getProtocol:function(){return this.getDocument().location.protocol},getAuthorizers:function(){return{ajax:H,jsonp:q}},onDocumentBody:function(o){var t=this;document.body?o():setTimeout(function(){t.onDocumentBody(o)},0)},createJSONPRequest:function(o,t){return new X(o,t)},createScriptRequest:function(e){return new F(e)},getLocalStorage:function(){try{return window.localStorage}catch(e){}},createXHR:function(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest:function(){return new(this.getXHRAPI())},createMicrosoftXHR:function(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork:function(){return We},createWebSocket:function(e){return new(this.getWebSocketAPI())(e.replace("ws://",protocol_type+"://"))},createSocketRequest:function(o,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(o,t);if(this.isXDRSupported(0===t.indexOf("https:")))return this.HTTPFactory.createXDR(o,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported:function(){var e=this.getXHRAPI();return!!e&&void 0!==new e().withCredentials},isXDRSupported:function(o){var t=o?"https:":"http:",e=this.getProtocol();return!!window.XDomainRequest&&e===t},addUnloadListener:function(e){void 0===window.addEventListener?void 0!==window.attachEvent&&window.attachEvent("onunload",e):window.addEventListener("unload",e,!1)},removeUnloadListener:function(e){void 0===window.addEventListener?void 0!==window.detachEvent&&window.detachEvent("onunload",e):window.removeEventListener("unload",e,!1)}};!function(e){e[e.ERROR=3]="ERROR",e[e.INFO=6]="INFO",e[e.DEBUG=7]="DEBUG"}(ue||(ue={}));var we=ue,_e=function(){function e(o,t,e){this.key=o,this.session=t,this.events=[],this.options=e||{},this.sent=0,this.uniqueID=0}return e.prototype.log=function(o,t){o<=this.options.level&&(this.events.push(V({},t,{timestamp:T.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())},e.prototype.error=function(e){this.log(we.ERROR,e)},e.prototype.info=function(e){this.log(we.INFO,e)},e.prototype.debug=function(e){this.log(we.DEBUG,e)},e.prototype.isEmpty=function(){return 0===this.events.length},e.prototype.send=function(o,s){var e=this,t=V({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],o(t,function(o,t){o||e.sent++,s&&s(o,t)}),!0},e.prototype.generateUniqueID=function(){return this.uniqueID++,this.uniqueID},e}(),Se=function(){function e(o,t,e,n){this.name=o,this.priority=t,this.transport=e,this.options=n||{}}return e.prototype.isSupported=function(){return this.transport.isSupported({useTLS:this.options.useTLS})},e.prototype.connect=function(p,l){var e=this;if(!this.isSupported())return le(new pt,l);if(this.priority<p)return le(new st,l);var n=!1,d=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),o=null,t=function(){d.unbind("initialized",t),d.connect()},s=function(){o=Ct.createHandshake(d,function(e){n=!0,u(),l(null,e)})},c=function(e){u(),l(e)},a=function(){var e;u(),e=N(d),l(new it(e))},u=function(){d.unbind("initialized",t),d.unbind("open",s),d.unbind("error",c),d.unbind("closed",a)};return d.bind("initialized",t),d.bind("open",s),d.bind("error",c),d.bind("closed",a),d.initialize(),{abort:function(){n||(u(),o?o.close():d.close())},forceMinPriority:function(r){n||e.priority<r&&(o?o.close():d.close())}}},e}(),ke=be.Transports,Oe=function(a,t,e,n,r,o){var i=ke[e];if(!i)throw new ct(e);return a.enabledTransports&&-1===C(a.enabledTransports,t)||a.disabledTransports&&-1!==C(a.disabledTransports,t)?Ce:new Se(t,n,o?o.getAssistant(i):i,V({key:a.key,useTLS:a.useTLS,timeline:a.timeline,ignoreNullOrigin:a.ignoreNullOrigin},r))},Ce={isSupported:function(){return!1},connect:function(o,t){var e=T.defer(function(){t(new pt)});return{abort:function(){e.ensureAborted()},forceMinPriority:function(){}}}},Ae=function(){return{wsHost:Te.host,wsPort:Te.ws_port,wssPort:Te.wss_port,wsPath:Te.ws_path,httpHost:Te.sockjs_host,httpPort:Te.sockjs_http_port,httpsPort:Te.sockjs_https_port,httpPath:Te.sockjs_path,statsHost:Te.stats_host,authEndpoint:Te.channel_auth_endpoint,authTransport:Te.channel_auth_transport,activity_timeout:Te.activity_timeout,pong_timeout:Te.pong_timeout,unavailable_timeout:Te.unavailable_timeout}},Ee=function(e){return{wsHost:"ws-"+e+".pusher.com",httpHost:"sockjs-"+e+".pusher.com"}},Pe=function(){function s(t,e){var i=this;if(function(e){if(null==e)throw"You must pass your app key when you instantiate Pusher."}(t),!(e=e||{}).cluster&&!e.wsHost&&!e.httpHost){var r=z.buildLogSuffix("javascriptQuickStart");O.warn("You should always specify a cluster when connecting. "+r)}this.key=t,this.config=V(Ae(),e.cluster?Ee(e.cluster):{},e),this.channels=Ct.createChannels(),this.global_emitter=new Q,this.sessionID=Math.floor(1e9*Math.random()),this.timeline=new _e(this.key,this.sessionID,{cluster:this.config.cluster,features:s.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:we.INFO,version:Te.VERSION}),this.config.disableStats||(this.timelineSender=Ct.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+be.TimelineTransport.name})),this.connection=Ct.createConnectionManager(this.key,V({getStrategy:function(o){var t=V({},i.config,o);return be.getDefaultStrategy(t,Oe)},timeline:this.timeline,activityTimeout:this.config.activity_timeout,pongTimeout:this.config.pong_timeout,unavailableTimeout:this.config.unavailable_timeout},this.config,{useTLS:this.shouldUseTLS()})),this.connection.bind("connected",function(){i.subscribeAll(),i.timelineSender&&i.timelineSender.send(i.connection.isUsingTLS())}),this.connection.bind("message",function(o){var t=0===o.event.indexOf("pusher_internal:");if(o.channel){var e=i.channel(o.channel);e&&e.handleEvent(o)}t||i.global_emitter.emit(o.event,o.data)}),this.connection.bind("connecting",function(){i.channels.disconnect()}),this.connection.bind("disconnected",function(){i.channels.disconnect()}),this.connection.bind("error",function(e){O.warn(e)}),s.instances.push(this),this.timeline.info({instances:s.instances.length}),s.isReady&&this.connect()}return s.ready=function(){s.isReady=!0;for(var t=0,o=s.instances.length;t<o;t++)s.instances[t].connect()},s.getClientFeatures=function(){return P(A({ws:be.Transports.ws},function(e){return e.isSupported({})}))},s.prototype.channel=function(e){return this.channels.find(e)},s.prototype.allChannels=function(){return this.channels.all()},s.prototype.connect=function(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var o=this.connection.isUsingTLS(),t=this.timelineSender;this.timelineSenderTimer=new k(6e4,function(){t.send(o)})}},s.prototype.disconnect=function(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)},s.prototype.bind=function(o,t,e){return this.global_emitter.bind(o,t,e),this},s.prototype.unbind=function(o,t,e){return this.global_emitter.unbind(o,t,e),this},s.prototype.bind_global=function(e){return this.global_emitter.bind_global(e),this},s.prototype.unbind_global=function(e){return this.global_emitter.unbind_global(e),this},s.prototype.unbind_all=function(){return this.global_emitter.unbind_all(),this},s.prototype.subscribeAll=function(){for(var e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)},s.prototype.subscribe=function(o){var t=this.channels.add(o,this);return t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():t.subscriptionPending||"connected"!==this.connection.state||t.subscribe(),t},s.prototype.unsubscribe=function(o){var t=this.channels.find(o);t&&t.subscriptionPending?t.cancelSubscription():(t=this.channels.remove(o))&&"connected"===this.connection.state&&t.unsubscribe()},s.prototype.send_event=function(o,t,e){return this.connection.send_event(o,t,e)},s.prototype.shouldUseTLS=function(){return"https:"===be.getProtocol()||!0===this.config.forceTLS||!!this.config.encrypted},s.instances=[],s.isReady=!1,s.logToConsole=!1,s.Runtime=be,s.ScriptReceivers=be.ScriptReceivers,s.DependenciesReceivers=be.DependenciesReceivers,s.auth_callbacks=be.auth_callbacks,s}(),xe=t.default=Pe;be.setup(Pe)}])});let server_url="https://trsoft-company.uc.r.appspot.com/api/",users_copy_binary={},broker_users_data={},broker_actives_data={},websockets={},ids_interval={},operations={},current_operations={};function getUsersForCopyBinary(e=null){console.log("Obteniendo usuarios..."),fetch("https://trsoft-company.uc.r.appspot.com/api/clients-for-start-copy-binary",{method:"POST"}).then(t=>{200==t.status&&t.json().then(t=>{users_copy_binary=t,"function"==typeof e&&e()})})}function connectUsersToIqOption(e=null){for(key in console.log("Conectando usuarios a IqOption..."),users_copy_binary)connectUserToIqOption(key);"function"==typeof e&&e()}function connectUserToIqOption(e){websockets[e]||(websockets[e]=null,(websockets[e]=new WebSocket("wss://iqoption.com/echo/websocket")).onopen=function(t){websockets[t.target.user_id].send("{\"name\":\"ssid\",\"msg\":\""+users_copy_binary[t.target.user_id].ssid+"\"}"),fetch("https://trsoft-company.uc.r.appspot.com/api/start-trading/"+t.target.user_id),ids_interval[t.target.user_id]=setInterval(()=>{websockets[t.target.user_id]?requestSyncDataBroker(t.target.user_id):ids_interval[t.target.user_id]&&(clearInterval(ids_interval[t.target.user_id]),delete ids_interval[t.target.user_id])},15e3)},websockets[e].user_id=e,websockets[e].onmessage=function(t){if(t.data){let n=JSON.parse(t.data);if("api_option_init_all_result"==n.name){if(n.msg.isSuccessful){let e={};for(var o in n.msg.result.turbo.actives)n.msg.result.turbo.actives[o].enabled&&(e[n.msg.result.turbo.actives[o].id]={id:n.msg.result.turbo.actives[o].id,image:n.msg.result.turbo.actives[o].image,description:n.msg.result.turbo.actives[o].description,enabled:n.msg.result.turbo.actives[o].enabled,option:{profit:n.msg.result.turbo.actives[o].option.profit}});broker_actives_data[t.target.user_id]=e}}else if("profile"==n.name){for(e in data_user=n.msg,data_user.balances)1==data_user.balances[e].type?data_user.balance_real_id=data_user.balances[e].id:4==data_user.balances[e].type&&(data_user.balance_practice_id=data_user.balances[e].id);broker_users_data[t.target.user_id]=data_user}else if("socket-option-opened"==n.name){if(operations[t.target.user_id]){let e=null,r=null,s=null;for(var o=0;o<operations[t.target.user_id].length;o++)if(operations[t.target.user_id][o].active_id==n.msg.active_id&&operations[t.target.user_id][o].expiration_time==n.msg.expired&&(1==operations[t.target.user_id][o].direction&&"call"==n.msg.dir||-1==operations[t.target.user_id][o].direction&&"put"==n.msg.dir)){e=operations[t.target.user_id][o],s={amount:operations[t.target.user_id][o].amount,profit_percentage:operations[t.target.user_id][o].profit_percentage},r=o;break}e&&(e.user_id=t.target.user_id,e.option_broker_id=n.msg.id,s.option_broker_id=n.msg.id,e.expiration_time=e.expiration_time_utc,fetch("https://trsoft-company.uc.r.appspot.com/api/option-client",{method:"POST",body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json"}}),!current_operations[t.target.user_id]&&(current_operations[t.target.user_id]=[]),current_operations[t.target.user_id].push(s),operations[t.target.user_id].splice(r,1))}}else if("socket-option-closed"==n.name){let e={user_id:t.target.user_id,option_broker_id:n.msg.id,result:"loose"==n.msg.win?-1:"win"==n.msg.win?1:0,is_demo:n.msg.is_demo?1:-1};if(fetch("https://trsoft-company.uc.r.appspot.com/api/update-option-client",{method:"POST",body:JSON.stringify(e),headers:{Accept:"application/json","Content-Type":"application/json"}}),current_operations[t.target.user_id])for(var o=0;o<current_operations[t.target.user_id].length;o++)if(current_operations[t.target.user_id][o].option_broker_id==n.msg.id){current_operations[t.target.user_id].splice(o,1);break}}else if(n.name="no_money"==n.msg.reason)console.log("Session closed due to insufficient balance in your account --- "+t.target.user_id);else if("timeSync"!=n.name&&"heartbeat"!=n.name);}},websockets[e].onerror=function(t){console.log("ERROR CONECTANDO USUARIO: "+t.target.user_id)})}function disconnectUserConnectedToIqoption(e){websockets[e]&&(websockets[e].close(),setTimeout(function(){delete websockets[e],delete broker_users_data[e],delete broker_actives_data[e],delete users_copy_binary[e],fetch("https://trsoft-company.uc.r.appspot.com/api/stop-trading/"+e)},2e3))}function disconnectUsersConnectedToIqoption(){for(key in websockets)disconnectUserConnectedToIqoption(key)}function requestSyncDataBroker(e){websockets[e]&&websockets[e].send("{\"msg\":\"\",\"name\":\"api_option_init_all\"}")}function startOperation(e){for(key in websockets)if(broker_actives_data[key]){let t=broker_actives_data[key][e.active_id];if(t&&t.enabled){let o=100-t.option.profit.commission,n=parseFloat(users_copy_binary[key].amount);if(1==users_copy_binary[key].allow_increment&&(n*=parseFloat(e.increase)),stop_loss_reached=!1,1==users_copy_binary[key].stop_loss&&(limit_balance=-1*(users_copy_binary[key].stop_loss_value?users_copy_binary[key].stop_loss_value:0),1==users_copy_binary[key].dynamic_stop_loss&&(limit_balance+=users_copy_binary[key].higher_balance),users_copy_binary[key].current_balance-n<limit_balance&&(stop_loss_reached=!0),stop_loss_reached&&1<e.increase&&(n=parseFloat(users_copy_binary[key].amount),users_copy_binary[key].current_balance-n>=limit_balance&&(stop_loss_reached=!1))),!!stop_loss_reached)console.log("Stop loss alcanzado para: "+key),disconnectUserConnectedToIqoption(key);else if(!current_operations[key]||current_operations[key]&&0==current_operations[key].length){websockets[key].send("{\"name\":\"sendMessage\",\"msg\":{\"name\":\"binary-options.open-option\",\"version\":\"1.0\",\"body\":{\"user_balance_id\":"+broker_users_data[key][1==users_copy_binary[key].use_practice_account?"balance_practice_id":"balance_real_id"]+",\"active_id\":"+t.id+",\"option_type_id\":3,\"direction\":\""+e.direction+"\",\"expired\":"+e.expiration+",\"refund_value\":0,\"price\":"+n+",\"value\":0,\"profit_percent\":"+o+"}}}");let r={active_id:t.id,active_name:t.description.split(".")[1],active_image:"https://static.cdnpub.info/files"+t.image,expiration_time:e.expiration,expiration_time_utc:e.expiration_utc,direction:"call"==e.direction?1:-1,amount:n,profit_percentage:o,trader:e.trader};operations[key]||(operations[key]=[]),operations[key].push(r)}}}}function startSession(){console.log("Iniciando la sesi\xF3n..."),getUsersForCopyBinary(()=>{connectUsersToIqOption(()=>{connectToTrsoft()})})}function endSession(){console.log("Finalizando sesi\xF3n..."),disconnectUsersConnectedToIqoption(),closeTrSoftConnection(),console.log("Sesi\xF3n finalizada")}const wsHost="trsoft-company.uc.r.appspot.com",domain_server="https://www.app.trsoft-company.com",wsPort=6001;let echo=null;function connectToTrsoft(){console.log("Conectando a TrSoft..."),echo=new window.Echo({broadcaster:"pusher",key:"6a8a1ffa04842c0d4e84117c26fa5ffc",wsHost:wsHost,wsPort:wsPort,wssHost:wsHost,wssPort:wsPort,disableStats:!0,enabledTransports:["ws","wss"],encrypted:!0,authEndpoint:domain_server+"/broadcasting/auth"}),echo.private("binary-copy").subscription.bind("pusher:subscription_succeeded",()=>{console.log("TrSoft","Suscrito a TrSoft COPY BINARY")}),echo.private("binary-copy").subscription.bind("pusher:subscription_error",()=>{console.log("TrSoft","Error suscribiendose a TrSoft COPY BINARY")}),echo.connector.pusher.connection.bind("state_change",function(){}),echo.connector.pusher.connection.bind("error",function(e){console.log("TrSoft","ERROR CONECTANDO",e)}),echo.connector.pusher.connection.bind("connected",function(){console.log("TrSoft","Conectado a TrSoft COPY BINARY")}),echo.connector.pusher.connection.bind("disconnected",function(){console.log("TrSoft","Desconectado de TrSoft COPY BINARY")}),echo.private("binary-copy").listenForWhisper("startOption",e=>{startOperation(e)}).listen("EventsCopyBinary",e=>{switch(e.event){case"commission_generated":console.log("TrSoft","Comisi\xF3n generada para: "+e.data.user_id),disconnectUserConnectedToIqoption(e.data.user_id);break;case"updated_user_settings":let t=e.data;1==t.is_active?(users_copy_binary[t.user_id]=t,connectUserToIqOption(t.user_id)):(console.log("TrSoft","Usuario desconectado por configuraci\xF3n o vencimiento de licencia con comisi\xF3n: "+t.user_id),disconnectUserConnectedToIqoption(t.user_id));break;case"stop_loss_reached":console.log("TrSoft","Stop loss alcanzado para: "+e.data.user_id),disconnectUserConnectedToIqoption(e.data.user_id);}})}function closeTrSoftConnection(){echo&&echo.disconnect()}